(function(n){
/*!
  Raphael 1.5.2 - JavaScript Vector Library
  Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)
  Licensed under the MIT (http://raphaeljs.com/license.html) license.
 */
function u(){return(new Date).getTime()}function f(n,t){return function(){return t.apply(n,arguments)}}function yt(t,i,r){if(typeof t.forEach=="function")return t.forEach(i,r),t;for(var u in t)t.hasOwnProperty(u)&&i.call(r||n,t[u],u);return t}function a(t,i,r){t.addEventListener?t.addEventListener(i,r,!1):t.attachEvent&&(t["e"+i+r]=r,t[i+r]=function(){return t["e"+i+r](n.event)},t.attachEvent("on"+i,t[i+r]))}function rt(n,t,i){n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent&&(n.detachEvent("on"+t,n[t+i]),n[t+i]=null,n["e"+t+i]=null)}function ut(n){n.stopPropogation&&n.stopPropogation();n.preventDefault&&n.preventDefault();n.returnValue=!1}function pt(n,t){return element.contains?n.contains(t):!!(n.compareDocumentPosition(t)&16)}function ot(n){var t={38:"up",40:"down",37:"left",39:"right",27:"esc"};return t[n]?t[n]:String.fromCharCode(n)}function e(n,t){return Math.floor(Math.random()*(t-n+1)+n)}function k(t){var i,r;if(typeof t.getBoundingClientRect=="function"){var i=t.getBoundingClientRect(),u=n.pageXOffset,f=n.pageYOffset;return{width:i.width,height:i.height,left:i.left+u,top:i.top+f}}for(i={width:t.offsetWidth,height:t.offsetHeight,left:0,top:0},r=t;r;)i.left+=r.offsetLeft,i.top+=r.offsetTop,r=r.offsetParent;return i}function wt(){var n=document;return!n.compatMode||n.compatMode=="CSS1Compat"?n.documentElement:n.body}function bt(){var n=wt(),t={x:n.clientWidth,y:n.clientHeight},i=document.body;return{x:Math.max(n.scrollWidth,i.scrollWidth,t.x),y:Math.max(n.scrollHeight,i.scrollHeight,t.y)}}function h(n,t){var i,r;for(i in t)t.hasOwnProperty(i)&&(r=t[i],typeof r=="number"&&i!=="opacity"&&i!=="zIndex"&&(r=r+"px"),n.style[i]=r)}function v(n,t){return n.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function d(n,t){v(n,t)||(n.className+=" "+t)}function st(n,t){if(v(n,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");n.className=n.className.replace(i," ")}}function ht(n){return n.cloneNode(!0)}function ct(n,t){var r=document.createElement(n);for(var i in t)t.hasOwnProperty(i)&&(i==="styles"?h(r,t[i]):r[i]=t[i]);return r}function g(n,t,i){return setTimeout(f(i,t),n)}var et,r,i,o,ft;(function(){function t(){var r,s,f;if(t.is(arguments[0],ht)){var n=arguments[0],e=vr[k](t,n.splice(0,3+t.is(n[0],it))),o=e.set();for(r=0,s=n[i];r<s;r++)f=n[r]||{},sf[u](f.type)&&o[y](e[f.type]().attr(f));return o}return vr[k](t,arguments)}function yi(){for(var n=[],t=0;t<32;t++)n[t]=(~~(c.random()*16))[pt](16);return n[12]=4,n[16]=(n[16]&3|8)[pt](16),"r-"+n[tt]("")}function wt(n,t,r){function f(){var h=Array[a].slice.call(arguments,0),e=h[tt]("►"),o=f.cache=f.cache||{},s=f.count=f.count||[];return o[u](e)?r?r(o[e]):o[e]:(s[i]>=1e3&&delete o[s.shift()],s[y](e),o[e]=n[k](t,h),r?r(o[e]):o[e])}return f}function uf(){return this.x+g+this.y}function of(n){return function(i,r,u,f){var e={back:n};return t.is(u,"function")?f=u:e.rot=u,i&&i.constructor==v&&(i=i.attrs.path),i&&(e.along=i),this.animate(e,r,f)}}function ve(n,t,i,r,u,f){function l(n){return((h*n+o)*n+e)*n}function v(n,t){var i=y(n,t);return((a*i+c)*i+s)*i}function y(n,t){for(var r,u,f,s,i=n,c=0;c<8;c++){if(f=l(i)-n,nt(f)<t)return i;if(s=(3*h*i+2*o)*i+e,nt(s)<1e-6)break;i=i-f/s}if(r=0,u=1,i=n,i<r)return r;if(i>u)return u;while(r<u){if(f=l(i),nt(f-n)<t)return i;n>f?r=i:u=i;i=(u-r)/2+r}return i}var e=3*t,o=3*(r-t)-e,h=1-e-o,s=3*i,c=3*(u-i)-s,a=1-s-c;return v(n,1/(200*f))}var ai,vi,r,et,yr,br,st,rr;t.version="1.5.2";var ct=/[, ]+/,sf={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},hf=/\{(\d+)\}/g,a="prototype",u="hasOwnProperty",e=document,dt=n,ur={was:Object[a][u].call(dt,"Raphael"),is:dt.Raphael},hi=function(){this.customAttributes={}},b,f="appendChild",k="apply",d="concat",fr="createTouch"in e,o="",g=" ",h=String,w="split",tu="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[w](g),er={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},tt="join",i="length",ni=h[a].toLowerCase,c=Math,ot=c.max,yt=c.min,nt=c.abs,p=c.pow,ft=c.PI,it="number",ti="string",ht="array",pt="toString",bt="fill",cf=Object[a][pt],y="push",iu=/^url\(['"]?([^\)]+?)['"]?\)$/i,lf=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,af={NaN:1,Infinity:1,"-Infinity":1},vf=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,rt=c.round,lt="setAttribute",s=parseFloat,kt=parseInt,or=" progid:DXImageTransform.Microsoft",ci=h[a].toUpperCase,li={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},sr={along:"along",blur:it,"clip-rect":"csv",cx:it,cy:it,fill:"colour","fill-opacity":it,"font-size":it,height:it,opacity:it,path:"path",r:it,rotation:"csv",rx:it,ry:it,scale:"csv",stroke:"colour","stroke-opacity":it,"stroke-width":it,translation:"csv",width:it,x:it,y:it},ut="replace",yf=/^(from|to|\d+%?)$/,hr=/\s*,\s*/,pf={hs:1,rg:1},wf=/,?([achlmqrstvxz]),?/gi,bf=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,kf=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,ru=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,df=function(n,t){return n.key-t.key};if(t.type=dt.SVGAngle||e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",t.type=="VML"){if(ai=e.createElement("div"),ai.innerHTML='<v:shape adj="1"/>',vi=ai.firstChild,vi.style.behavior="url(#default#VML)",!(vi&&typeof vi.adj=="object"))return t.type=null;ai=null}t.svg=!(t.vml=t.type=="VML");hi[a]=t[a];b=hi[a];t._id=0;t._oid=0;t.fn={};t.is=function(n,t){return(t=ni.call(t),t=="finite")?!af[u](+n):t=="null"&&n===null||t==typeof n||t=="object"&&n===Object(n)||t=="array"&&Array.isArray&&Array.isArray(n)||cf.call(n).slice(8,-1).toLowerCase()==t};t.angle=function(n,i,r,u,f,e){if(f==null){var o=n-r,s=i-u;return!o&&!s?0:((o<0)*180+c.atan(-s/-o)*180/ft+360)%360}return t.angle(n,i,f,e)-t.angle(r,u,f,e)};t.rad=function(n){return n%360*ft/180};t.deg=function(n){return n*180/ft%360};t.snapTo=function(n,i,r){var f,u;if(r=t.is(r,"finite")?r:10,t.is(n,ht)){for(f=n.length;f--;)if(nt(n[f]-i)<=r)return n[f]}else{if(n=+n,u=i%n,u<r)return i-u;if(u>n-r)return i-u+n}return i};t.setWindow=function(n){dt=n;e=dt.document};var pi=function(n){var s,r,u,c,i;if(t.vml){s=/^\s+|\s+$/g;try{u=new ActiveXObject("htmlfile");u.write("<body>");u.close();r=u.body}catch(l){r=createPopup().document.body}c=r.createTextRange();pi=wt(function(n){try{r.style.color=h(n)[ut](s,o);var t=c.queryCommandValue("ForeColor");return t=(t&255)<<16|t&65280|(t&16711680)>>>16,"#"+("000000"+t[pt](16)).slice(-6)}catch(i){return"none"}})}else i=e.createElement("i"),i.title="Raphaël Colour Picker",i.style.display="none",e.body[f](i),pi=wt(function(n){return i.style.color=n,e.defaultView.getComputedStyle(i,o).getPropertyValue("color")});return pi(n)},uu=function(){return"hsb("+[this.h,this.s,this.b]+")"},gf=function(){return"hsl("+[this.h,this.s,this.l]+")"},ne=function(){return this.hex};t.hsb2rgb=function(n,i,r,u){return t.is(n,"object")&&"h"in n&&"s"in n&&"b"in n&&(r=n.b,i=n.s,n=n.h,u=n.o),t.hsl2rgb(n,i,r/2,u)};t.hsl2rgb=function(n,i,r,u){var f,c,s,o,e,h;if(t.is(n,"object")&&"h"in n&&"s"in n&&"l"in n&&(r=n.l,i=n.s,n=n.h),(n>1||i>1||r>1)&&(n/=360,i/=100,r/=100),f={},c=["r","g","b"],i)for(s=r<.5?r*(1+i):r+i-r*i,o=2*r-s,h=0;h<3;h++)e=n+1/3*-(h-1),e<0&&e++,e>1&&e--,f[c[h]]=e*6<1?o+(s-o)*6*e:e*2<1?s:e*3<2?o+(s-o)*(2/3-e)*6:o;else f={r:r,g:r,b:r};return f.r*=255,f.g*=255,f.b*=255,f.hex="#"+(16777216|f.b|f.g<<8|f.r<<16).toString(16).slice(1),t.is(u,"finite")&&(f.opacity=u),f.toString=ne,f};t.rgb2hsb=function(n,i,r){var o,e;i==null&&t.is(n,"object")&&"r"in n&&"g"in n&&"b"in n&&(r=n.b,i=n.g,n=n.r);i==null&&t.is(n,ti)&&(o=t.getRGB(n),n=o.r,i=o.g,r=o.b);(n>1||i>1||r>1)&&(n/=255,i/=255,r/=255);var u=ot(n,i,r),s=yt(n,i,r),f,h,c=u;return s==u?{h:0,s:0,b:u,toString:uu}:(e=u-s,h=e/u,f=n==u?(i-r)/e:i==u?2+(r-n)/e:4+(n-i)/e,f/=6,f<0&&f++,f>1&&f--,{h:f,s:h,b:c,toString:uu})};t.rgb2hsl=function(n,i,r){var s,e;i==null&&t.is(n,"object")&&"r"in n&&"g"in n&&"b"in n&&(r=n.b,i=n.g,n=n.r);i==null&&t.is(n,ti)&&(s=t.getRGB(n),n=s.r,i=s.g,r=s.b);(n>1||i>1||r>1)&&(n/=255,i/=255,r/=255);var u=ot(n,i,r),o=yt(n,i,r),f,l,c=(u+o)/2,h;return o==u?h={h:0,s:0,l:c}:(e=u-o,l=c<.5?e/(u+o):e/(2-u-o),f=n==u?(i-r)/e:i==u?2+(r-n)/e:4+(n-i)/e,f/=6,f<0&&f++,f>1&&f--,h={h:f,s:l,l:c}),h.toString=gf,h};t._path2string=function(){return this.join(",")[ut](wf,"$1")};t.getRGB=wt(function(n){if(!n||!!((n=h(n)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1};if(n=="none")return{r:-1,g:-1,b:-1,hex:"none"};pf[u](n.toLowerCase().substring(0,2))||n.charAt()=="#"||(n=pi(n));var f,e,o,c,l,i,r=n.match(lf);return r?(r[2]&&(o=kt(r[2].substring(5),16),e=kt(r[2].substring(3,5),16),f=kt(r[2].substring(1,3),16)),r[3]&&(o=kt((l=r[3].charAt(3))+l,16),e=kt((l=r[3].charAt(2))+l,16),f=kt((l=r[3].charAt(1))+l,16)),r[4]&&(i=r[4][w](hr),f=s(i[0]),i[0].slice(-1)=="%"&&(f*=2.55),e=s(i[1]),i[1].slice(-1)=="%"&&(e*=2.55),o=s(i[2]),i[2].slice(-1)=="%"&&(o*=2.55),r[1].toLowerCase().slice(0,4)=="rgba"&&(c=s(i[3])),i[3]&&i[3].slice(-1)=="%"&&(c/=100)),r[5])?(i=r[5][w](hr),f=s(i[0]),i[0].slice(-1)=="%"&&(f*=2.55),e=s(i[1]),i[1].slice(-1)=="%"&&(e*=2.55),o=s(i[2]),i[2].slice(-1)=="%"&&(o*=2.55),(i[0].slice(-3)=="deg"||i[0].slice(-1)=="°")&&(f/=360),r[1].toLowerCase().slice(0,4)=="hsba"&&(c=s(i[3])),i[3]&&i[3].slice(-1)=="%"&&(c/=100),t.hsb2rgb(f,e,o,c)):r[6]?(i=r[6][w](hr),f=s(i[0]),i[0].slice(-1)=="%"&&(f*=2.55),e=s(i[1]),i[1].slice(-1)=="%"&&(e*=2.55),o=s(i[2]),i[2].slice(-1)=="%"&&(o*=2.55),(i[0].slice(-3)=="deg"||i[0].slice(-1)=="°")&&(f/=360),r[1].toLowerCase().slice(0,4)=="hsla"&&(c=s(i[3])),i[3]&&i[3].slice(-1)=="%"&&(c/=100),t.hsl2rgb(f,e,o,c)):(r={r:f,g:e,b:o},r.hex="#"+(16777216|o|e<<8|f<<16).toString(16).slice(1),t.is(c,"finite")&&(r.opacity=c),r):{r:-1,g:-1,b:-1,hex:"none",error:1}},t);t.getColor=function(n){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:n||.75},i=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),i.hex};t.getColor.reset=function(){delete this.start};t.parsePathString=wt(function(n){if(!n)return null;var u={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return t.is(n,ht)&&t.is(n[0],ht)&&(r=bi(n)),r[i]||h(n)[ut](bf,function(n,t,f){var e=[],o=ni.call(t);for(f[ut](kf,function(n,t){t&&e[y](+t)}),o=="m"&&e[i]>2&&(r[y]([t][d](e.splice(0,2))),o="l",t=t=="m"?"l":"L");e[i]>=u[o];)if(r[y]([t][d](e.splice(0,u[o]))),!u[o])break}),r[pt]=t._path2string,r});t.findDotsAtSegment=function(n,t,i,r,u,f,e,o,s){var h=1-s,b=p(h,3)*n+p(h,2)*3*s*i+h*3*s*s*u+p(s,3)*e,k=p(h,3)*t+p(h,2)*3*s*r+h*3*s*s*f+p(s,3)*o,l=n+2*s*(i-n)+s*s*(u-2*i+n),a=t+2*s*(r-t)+s*s*(f-2*r+t),v=i+2*s*(u-i)+s*s*(e-2*u+i),y=r+2*s*(f-r)+s*s*(o-2*f+r),d=(1-s)*n+s*i,g=(1-s)*t+s*r,nt=(1-s)*u+s*e,tt=(1-s)*f+s*o,w=90-c.atan((l-v)/(a-y))*180/ft;return(l>v||a<y)&&(w+=180),{x:b,y:k,m:{x:l,y:a},n:{x:v,y:y},start:{x:d,y:g},end:{x:nt,y:tt},alpha:w}};var wi=wt(function(n){var s,l,f,h,c;if(!n)return{x:0,y:0,width:0,height:0};n=gi(n);var e=0,o=0,r=[],u=[],t;for(s=0,l=n[i];s<l;s++)t=n[s],t[0]=="M"?(e=t[1],o=t[2],r[y](e),u[y](o)):(f=te(e,o,t[1],t[2],t[3],t[4],t[5],t[6]),r=r[d](f.min.x,f.max.x),u=u[d](f.min.y,f.max.y),e=t[5],o=t[6]);return h=yt[k](0,r),c=yt[k](0,u),{x:h,y:c,width:ot[k](0,r)-h,height:ot[k](0,u)-c}}),bi=function(n){var f=[],r,e,u,o;for(t.is(n,ht)&&t.is(n&&n[0],ht)||(n=t.parsePathString(n)),r=0,e=n[i];r<e;r++)for(f[r]=[],u=0,o=n[r][i];u<o;u++)f[r][u]=n[r][u];return f[pt]=t._path2string,f},cr=wt(function(n){var u,w,f,r,h,b,c,k,l;t.is(n,ht)&&t.is(n&&n[0],ht)||(n=t.parsePathString(n));var e=[],s=0,o=0,a=0,v=0,p=0;for(n[0][0]=="M"&&(s=n[0][1],o=n[0][2],a=s,v=o,p++,e[y](["M",s,o])),u=p,w=n[i];u<w;u++){if(f=e[u]=[],r=n[u],r[0]!=ni.call(r[0])){f[0]=ni.call(r[0]);switch(f[0]){case"a":f[1]=r[1];f[2]=r[2];f[3]=r[3];f[4]=r[4];f[5]=r[5];f[6]=+(r[6]-s).toFixed(3);f[7]=+(r[7]-o).toFixed(3);break;case"v":f[1]=+(r[1]-o).toFixed(3);break;case"m":a=r[1];v=r[2];default:for(h=1,b=r[i];h<b;h++)f[h]=+(r[h]-(h%2?s:o)).toFixed(3)}}else for(f=e[u]=[],r[0]=="m"&&(a=r[1]+s,v=r[2]+o),c=0,k=r[i];c<k;c++)e[u][c]=r[c];l=e[u][i];switch(e[u][0]){case"z":s=a;o=v;break;case"h":s+=+e[u][l-1];break;case"v":o+=+e[u][l-1];break;default:s+=+e[u][l-2];o+=+e[u][l-1]}}return e[pt]=t._path2string,e},0,bi),fi=wt(function(n){var f,y,u,r,h,p,c,w;t.is(n,ht)&&t.is(n&&n[0],ht)||(n=t.parsePathString(n));var e=[],o=0,s=0,l=0,a=0,v=0;for(n[0][0]=="M"&&(o=+n[0][1],s=+n[0][2],l=o,a=s,v++,e[0]=["M",o,s]),f=v,y=n[i];f<y;f++){if(u=e[f]=[],r=n[f],r[0]!=ci.call(r[0])){u[0]=ci.call(r[0]);switch(u[0]){case"A":u[1]=r[1];u[2]=r[2];u[3]=r[3];u[4]=r[4];u[5]=r[5];u[6]=+(r[6]+o);u[7]=+(r[7]+s);break;case"V":u[1]=+r[1]+s;break;case"H":u[1]=+r[1]+o;break;case"M":l=+r[1]+o;a=+r[2]+s;default:for(h=1,p=r[i];h<p;h++)u[h]=+r[h]+(h%2?o:s)}}else for(c=0,w=r[i];c<w;c++)e[f][c]=r[c];switch(u[0]){case"Z":o=l;s=a;break;case"H":o=u[1];break;case"V":s=u[1];break;case"M":l=e[f][e[f][i]-2];a=e[f][e[f][i]-1];default:o=e[f][e[f][i]-2];s=e[f][e[f][i]-1]}}return e[pt]=t._path2string,e},null,bi),ki=function(n,t,i,r){return[n,t,i,r,i,r]},fu=function(n,t,i,r,u,f){var e=1/3,o=2/3;return[e*n+o*i,e*t+o*r,e*u+o*i,e*f+o*r,u,f]},eu=function(n,t,r,u,f,e,o,s,h,l){var vt=ft*120/180,ot=ft/180*(+f||0),y=[],g,st=wt(function(n,t,i){var r=n*c.cos(i)-t*c.sin(i),u=n*c.sin(i)+t*c.cos(i);return{x:r,y:u}}),ht,at,p,ti;if(l)v=l[0],a=l[1],ut=l[2],et=l[3];else{g=st(n,t,-ot);n=g.x;t=g.y;g=st(s,h,-ot);s=g.x;h=g.y;var hi=c.cos(ft/180*f),ci=c.sin(ft/180*f),b=(n-s)/2,k=(t-h)/2,rt=b*b/(r*r)+k*k/(u*u);rt>1&&(rt=c.sqrt(rt),r=rt*r,u=rt*u);var ct=r*r,lt=u*u,yt=(e==o?-1:1)*c.sqrt(nt((ct*lt-ct*k*k-lt*b*b)/(ct*k*k+lt*b*b))),ut=yt*r*k/u+(n+s)/2,et=yt*-u*b/r+(t+h)/2,v=c.asin(((t-et)/u).toFixed(9)),a=c.asin(((h-et)/u).toFixed(9));v=n<ut?ft-v:v;a=s<ut?ft-a:a;v<0&&(v=ft*2+v);a<0&&(a=ft*2+a);o&&v>a&&(v=v-ft*2);!o&&a>v&&(a=a-ft*2)}if(ht=a-v,nt(ht)>vt){var ii=a,ri=s,ui=h;a=v+vt*(o&&a>v?1:-1);s=ut+r*c.cos(a);h=et+u*c.sin(a);y=eu(s,h,r,u,f,0,o,ri,ui,[a,ii,ut,et])}ht=a-v;var fi=c.cos(v),ei=c.sin(v),oi=c.cos(a),si=c.sin(a),pt=c.tan(ht/4),bt=4/3*r*pt,kt=4/3*u*pt,dt=[n,t],it=[n+bt*ei,t-kt*fi],gt=[s+bt*si,h-kt*oi],ni=[s,h];if(it[0]=2*dt[0]-it[0],it[1]=2*dt[1]-it[1],l)return[it,gt,ni][d](y);for(y=[it,gt,ni][d](y)[tt]()[w](","),at=[],p=0,ti=y[i];p<ti;p++)at[p]=p%2?st(y[p-1],y[p],ot).y:st(y[p],y[p+1],ot).x;return at},di=function(n,t,i,r,u,f,e,o,s){var h=1-s;return{x:p(h,3)*n+p(h,2)*3*s*i+h*3*s*s*u+p(s,3)*e,y:p(h,3)*t+p(h,2)*3*s*r+h*3*s*s*f+p(s,3)*o}},te=wt(function(n,t,i,r,u,f,e,o){var v=u-2*i+n-(e-2*u+i),s=2*(i-n)-2*(u-i),b=n-i,l=(-s+c.sqrt(s*s-4*v*b))/2/v,a=(-s-c.sqrt(s*s-4*v*b))/2/v,p=[t,o],w=[n,e],h;return nt(l)>"1e12"&&(l=.5),nt(a)>"1e12"&&(a=.5),l>0&&l<1&&(h=di(n,t,i,r,u,f,e,o,l),w[y](h.x),p[y](h.y)),a>0&&a<1&&(h=di(n,t,i,r,u,f,e,o,a),w[y](h.x),p[y](h.y)),v=f-2*r+t-(o-2*f+r),s=2*(r-t)-2*(f-r),b=t-r,l=(-s+c.sqrt(s*s-4*v*b))/2/v,a=(-s-c.sqrt(s*s-4*v*b))/2/v,nt(l)>"1e12"&&(l=.5),nt(a)>"1e12"&&(a=.5),l>0&&l<1&&(h=di(n,t,i,r,u,f,e,o,l),w[y](h.x),p[y](h.y)),a>0&&a<1&&(h=di(n,t,i,r,u,f,e,o,a),w[y](h.x),p[y](h.y)),{min:{x:yt[k](0,w),y:yt[k](0,p)},max:{x:ot[k](0,w),y:ot[k](0,p)}}}),gi=wt(function(n,t){for(var f=fi(n),r=t&&fi(t),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},y=function(n,t){var i,r;if(!n)return["C",t.x,t.y,t.x,t.y,t.x,t.y];n[0]in{T:1,Q:1}||(t.qx=t.qy=null);switch(n[0]){case"M":t.X=n[1];t.Y=n[2];break;case"A":n=["C"][d](eu[k](0,[t.x,t.y][d](n.slice(1))));break;case"S":i=t.x+(t.x-(t.bx||t.x));r=t.y+(t.y-(t.by||t.y));n=["C",i,r][d](n.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x));t.qy=t.y+(t.y-(t.qy||t.y));n=["C"][d](fu(t.x,t.y,t.qx,t.qy,n[1],n[2]));break;case"Q":t.qx=n[1];t.qy=n[2];n=["C"][d](fu(t.x,t.y,n[1],n[2],n[3],n[4]));break;case"L":n=["C"][d](ki(t.x,t.y,n[1],n[2]));break;case"H":n=["C"][d](ki(t.x,t.y,n[1],t.y));break;case"V":n=["C"][d](ki(t.x,t.y,t.x,n[1]));break;case"Z":n=["C"][d](ki(t.x,t.y,t.X,t.Y))}return n},p=function(n,t){if(n[t][i]>7){n[t].shift();for(var u=n[t];u[i];)n.splice(t++,0,["C"][d](u.splice(0,6)));n.splice(t,1);v=ot(f[i],r&&r[i]||0)}},w=function(n,t,u,e,o){n&&t&&n[o][0]=="M"&&t[o][0]!="M"&&(t.splice(o,0,["M",e.x,e.y]),u.bx=0,u.by=0,u.x=n[o][1],u.y=n[o][2],v=ot(f[i],r&&r[i]||0))},u=0,v=ot(f[i],r&&r[i]||0);u<v;u++){f[u]=y(f[u],e);p(f,u);r&&(r[u]=y(r[u],o));r&&p(r,u);w(f,r,e,o,u);w(r,f,o,e,u);var h=f[u],c=r&&r[u],l=h[i],a=r&&c[i];e.x=h[l-2];e.y=h[l-1];e.bx=s(h[l-4])||e.x;e.by=s(h[l-3])||e.y;o.bx=r&&(s(c[a-4])||o.x);o.by=r&&(s(c[a-3])||o.y);o.x=r&&c[a-2];o.y=r&&c[a-1]}return r?[f,r]:f},null,bi),ou=wt(function(n){for(var e,c,l,o,f,a,u=[],r=0,h=n[i];r<h;r++){if(e={},c=n[r].match(/^([^:]*):?([\d\.]*)/),e.color=t.getRGB(c[1]),e.color.error)return null;e.color=e.color.hex;c[2]&&(e.offset=c[2]+"%");u[y](e)}for(r=1,h=u[i]-1;r<h;r++)if(!u[r].offset){for(l=s(u[r-1].offset||0),o=0,f=r+1;f<h;f++)if(u[f].offset){o=u[f].offset;break}for(o||(o=100,f=h),o=s(o),a=(o-l)/(f-r+1);r<f;r++)l+=a,u[r].offset=l+"%"}return u}),su=function(n,i,r,u){var f;if(t.is(n,ti)||t.is(n,"object")){if(f=t.is(n,ti)?e.getElementById(n):n,f.tagName)return i==null?{container:f,width:f.style.pixelWidth||f.offsetWidth,height:f.style.pixelHeight||f.offsetHeight}:{container:f,width:i,height:r}}else return{container:1,x:n,y:i,width:r,height:u}},lr=function(n,t){var r=this;for(var i in t)if(t[u](i)&&!(i in n))switch(typeof t[i]){case"function":(function(t){n[i]=n===r?t:function(){return t[k](r,arguments)}})(t[i]);break;case"object":n[i]=n[i]||{};lr.call(this,n[i],t[i]);break;default:n[i]=t[i]}},ri=function(n,t){n==t.top&&(t.top=n.prev);n==t.bottom&&(t.bottom=n.next);n.next&&(n.next.prev=n.prev);n.prev&&(n.prev.next=n.next)},hu=function(n,t){t.top!==n&&(ri(n,t),n.next=null,n.prev=t.top,t.top.next=n,t.top=n)},cu=function(n,t){t.bottom!==n&&(ri(n,t),n.next=t.bottom,n.prev=null,t.bottom.prev=n,t.bottom=n)},lu=function(n,t,i){ri(n,i);t==i.top&&(i.top=n);t.next&&(t.next.prev=n);n.next=t.next;n.prev=t;t.next=n},au=function(n,t,i){ri(n,i);t==i.bottom&&(i.bottom=n);t.prev&&(t.prev.next=n);n.prev=t.prev;t.prev=n;n.next=t},vu=function(n){return function(){throw new Error("Raphaël: you are calling to method “"+n+"” of removed object");}};if(t.pathToRelative=cr,t.svg){b.svgns="http://www.w3.org/2000/svg";b.xlink="http://www.w3.org/1999/xlink";rt=function(n){return+n+(~~n===n)*.5};r=function(n,t){if(t)for(var i in t)t[u](i)&&n[lt](i,h(t[i]));else return n=e.createElementNS(b.svgns,n),n.style.webkitTapHighlightColor="rgba(0,0,0,0)",n};t[pt]=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var yu=function(n,t){var u=r("path"),i;return t.canvas&&t.canvas[f](u),i=new v(u,t),i.type="path",gt(i,{fill:"none",stroke:"#000",path:n}),i},ei=function(n,t,u){var g="linear",tt=.5,a=.5,it=n.style,y,l,rt,b,d,k,v,st,et;if(t=h(t)[ut](ru,function(n,t,i){if(g="radial",t&&i){tt=s(t);a=s(i);var r=(a>.5)*2-1;p(tt-.5,2)+p(a-.5,2)>.25&&(a=c.sqrt(.25-p(tt-.5,2))*r+.5)&&a!=.5&&(a=a.toFixed(5)-1e-5*r)}return o}),t=t[w](/\s*\-\s*/),g=="linear"){if(y=t.shift(),y=-s(y),isNaN(y))return null;l=[0,0,c.cos(y*ft/180),c.sin(y*ft/180)];rt=1/(ot(nt(l[2]),nt(l[3]))||1);l[2]*=rt;l[3]*=rt;l[2]<0&&(l[0]=-l[2],l[2]=0);l[3]<0&&(l[1]=-l[3],l[3]=0)}if(b=ou(t),!b)return null;for(d=n.getAttribute(bt),d=d.match(/^url\(#(.*)\)$/),d&&u.defs.removeChild(e.getElementById(d[1])),k=r(g+"Gradient"),k.id=yi(),r(k,g=="radial"?{fx:tt,fy:a}:{x1:l[0],y1:l[1],x2:l[2],y2:l[3]}),u.defs[f](k),v=0,st=b[i];v<st;v++)et=r("stop"),r(et,{offset:b[v].offset?b[v].offset:v?"100%":"0%","stop-color":b[v].color||"#fff"}),k[f](et);return r(n,{fill:"url(#"+k.id+")",opacity:1,"fill-opacity":1}),it.fill=o,it.opacity=1,it.fillOpacity=1,1},ar=function(n){var i=n.getBBox();r(n.pattern,{patternTransform:t.format("translate({0},{1})",i.x,i.y)})},gt=function(n,c){var dt={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},a=n.node,y=n.attrs,rt=n.rotate(),pt=function(n,t){if(t=dt[ni.call(t)],t){for(var f=n.attrs["stroke-width"]||"1",o={round:f,square:f,butt:0}[n.attrs["stroke-linecap"]||c["stroke-linecap"]]||0,e=[],u=t[i];u--;)e[u]=t[u]*f+(u%2?1:-1)*o;r(a,{"stroke-dasharray":e[tt](",")})}},b,v,l,nt,ot,it,k,st,ht,p,at,ft,et,d,vt,yt,wt;c[u]("rotation")&&(rt=c.rotation);b=h(rt)[w](ct);b.length-1?(b[1]=+b[1],b[2]=+b[2]):b=null;s(rt)&&n.rotate(0,!0);for(v in c)if(c[u](v)){if(!li[u](v))continue;l=c[v];y[v]=l;switch(v){case"blur":n.blur(l);break;case"rotation":n.rotate(l,!0);break;case"href":case"title":case"target":nt=a.parentNode;ni.call(nt.tagName)!="a"&&(ot=r("a"),nt.insertBefore(ot,a),ot[f](a),nt=ot);v=="target"&&l=="blank"?nt.setAttributeNS(n.paper.xlink,"show","new"):nt.setAttributeNS(n.paper.xlink,v,l);break;case"cursor":a.style.cursor=l;break;case"clip-rect":it=h(l)[w](ct);it[i]==4&&(n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode),k=r("clipPath"),st=r("rect"),k.id=yi(),r(st,{x:it[0],y:it[1],width:it[2],height:it[3]}),k[f](st),n.paper.defs[f](k),r(a,{"clip-path":"url(#"+k.id+")"}),n.clip=st);l||(ht=e.getElementById(a.getAttribute("clip-path")[ut](/(^url\(#|\)$)/g,o)),ht&&ht.parentNode.removeChild(ht),r(a,{"clip-path":o}),delete n.clip);break;case"path":n.type=="path"&&r(a,{d:l?y.path=fi(l):"M0,0"});break;case"width":if(a[lt](v,l),y.fx)v="x",l=y.x;else break;case"x":y.fx&&(l=-y.x-(y.width||0));case"rx":if(v=="rx"&&n.type=="rect")break;case"cx":b&&(v=="x"||v=="cx")&&(b[1]+=l-y[v]);a[lt](v,l);n.pattern&&ar(n);break;case"height":if(a[lt](v,l),y.fy)v="y",l=y.y;else break;case"y":y.fy&&(l=-y.y-(y.height||0));case"ry":if(v=="ry"&&n.type=="rect")break;case"cy":b&&(v=="y"||v=="cy")&&(b[2]+=l-y[v]);a[lt](v,l);n.pattern&&ar(n);break;case"r":n.type=="rect"?r(a,{rx:l,ry:l}):a[lt](v,l);break;case"src":n.type=="image"&&a.setAttributeNS(n.paper.xlink,"href",l);break;case"stroke-width":a.style.strokeWidth=l;a[lt](v,l);y["stroke-dasharray"]&&pt(n,y["stroke-dasharray"]);break;case"stroke-dasharray":pt(n,l);break;case"translation":p=h(l)[w](ct);p[0]=+p[0]||0;p[1]=+p[1]||0;b&&(b[1]+=p[0],b[2]+=p[1]);ir.call(n,p[0],p[1]);break;case"scale":p=h(l)[w](ct);n.scale(+p[0]||1,+p[1]||+p[0]||1,isNaN(s(p[2]))?null:+p[2],isNaN(s(p[3]))?null:+p[3]);break;case bt:if(at=h(l).match(iu),at){k=r("pattern");ft=r("image");k.id=yi();r(k,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});r(ft,{x:0,y:0});ft.setAttributeNS(n.paper.xlink,"href",at[1]);k[f](ft);et=e.createElement("img");et.style.cssText="position:absolute;left:-9999em;top-9999em";et.onload=function(){r(k,{width:this.offsetWidth,height:this.offsetHeight});r(ft,{width:this.offsetWidth,height:this.offsetHeight});e.body.removeChild(this);n.paper.safari()};e.body[f](et);et.src=at[1];n.paper.defs[f](k);a.style.fill="url(#"+k.id+")";r(a,{fill:"url(#"+k.id+")"});n.pattern=k;n.pattern&&ar(n);break}if(d=t.getRGB(l),d.error){if(({circle:1,ellipse:1}[u](n.type)||h(l).charAt()!="r")&&ei(a,l,n.paper)){y.gradient=l;y.fill="none";break}}else delete c.gradient,delete y.gradient,!t.is(y.opacity,"undefined")&&t.is(c.opacity,"undefined")&&r(a,{opacity:y.opacity}),!t.is(y["fill-opacity"],"undefined")&&t.is(c["fill-opacity"],"undefined")&&r(a,{"fill-opacity":y["fill-opacity"]});d[u]("opacity")&&r(a,{"fill-opacity":d.opacity>1?d.opacity/100:d.opacity});case"stroke":d=t.getRGB(l);a[lt](v,d.hex);v=="stroke"&&d[u]("opacity")&&r(a,{"stroke-opacity":d.opacity>1?d.opacity/100:d.opacity});break;case"gradient":({circle:1,ellipse:1}[u](n.type)||h(l).charAt()!="r")&&ei(a,l,n.paper);break;case"opacity":y.gradient&&!y[u]("stroke-opacity")&&r(a,{"stroke-opacity":l>1?l/100:l});case"fill-opacity":if(y.gradient){vt=e.getElementById(a.getAttribute(bt)[ut](/^url\(#|\)$/g,o));vt&&(yt=vt.getElementsByTagName("stop"),yt[yt[i]-1][lt]("stop-opacity",l));break}default:v=="font-size"&&(l=kt(l,10)+"px");wt=v[ut](/(\-.)/g,function(n){return ci.call(n.substring(1))});a.style[wt]=l;a[lt](v,l)}}ie(n,c);b?n.rotate(b.join(g)):s(rt)&&n.rotate(rt,!0)},pu=1.2,ie=function(n,s){var a,c,y,p,k,b;if(n.type=="text"&&(s[u]("text")||s[u]("font")||s[u]("font-size")||s[u]("x")||s[u]("y"))){var v=n.attrs,l=n.node,d=l.firstChild?kt(e.defaultView.getComputedStyle(l.firstChild,o).getPropertyValue("font-size"),10):10;if(s[u]("text")){for(v.text=s.text;l.firstChild;)l.removeChild(l.firstChild);for(a=h(s.text)[w]("\n"),c=0,y=a[i];c<y;c++)a[c]&&(p=r("tspan"),c&&r(p,{dy:d*pu,x:v.x}),p[f](e.createTextNode(a[c])),l[f](p))}else for(a=l.getElementsByTagName("tspan"),c=0,y=a[i];c<y;c++)c&&r(a[c],{dy:d*pu,x:v.x});r(l,{y:v.y});k=n.getBBox();b=v.y-(k.y+k.height/2);b&&t.is(b,"finite")&&r(l,{y:v.y+b})}},v=function(n,i){this[0]=n;this.id=t._oid++;this.node=n;n.raphael=this;this.paper=i;this.attrs=this.attrs||{};this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};i.bottom||(i.bottom=this);this.prev=i.top;i.top&&(i.top.next=this);i.top=this;this.next=null},l=v[a];v[a].rotate=function(n,u,f){if(this.removed)return this;if(n==null)return this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][tt](g):this._.rt.deg;var e=this.getBBox();return n=h(n)[w](ct),n[i]-1&&(u=s(n[1]),f=s(n[2])),n=s(n[0]),u!=null&&u!==!1?this._.rt.deg=n:this._.rt.deg+=n,f==null&&(u=null),this._.rt.cx=u,this._.rt.cy=f,u=u==null?e.x+e.width/2:u,f=f==null?e.y+e.height/2:f,this._.rt.deg?(this.transformations[0]=t.format("rotate({0} {1} {2})",this._.rt.deg,u,f),this.clip&&r(this.clip,{transform:t.format("rotate({0} {1} {2})",-this._.rt.deg,u,f)})):(this.transformations[0]=o,this.clip&&r(this.clip,{transform:o})),r(this.node,{transform:this.transformations[tt](g)}),this};v[a].hide=function(){return this.removed||(this.node.style.display="none"),this};v[a].show=function(){return this.removed||(this.node.style.display=""),this};v[a].remove=function(){if(!this.removed){ri(this,this.paper);this.node.parentNode.removeChild(this.node);for(var n in this)delete this[n];this.removed=!0}};v[a].getBBox=function(){var r,n,i,u,t;if(this.removed)return this;if(this.type=="path")return wi(this.attrs.path);this.node.style.display=="none"&&(this.show(),r=!0);n={};try{n=this.node.getBBox()}catch(f){}finally{n=n||{}}if(this.type=="text")for(n={x:n.x,y:Infinity,width:0,height:0},i=0,u=this.node.getNumberOfChars();i<u;i++)t=this.node.getExtentOfChar(i),t.y<n.y&&(n.y=t.y),t.y+t.height-n.y>n.height&&(n.height=t.y+t.height-n.y),t.x+t.width-n.x>n.width&&(n.width=t.x+t.width-n.x);return r&&this.hide(),n};v[a].attr=function(n,i){var r,s,l,o,a,f,e,h,c;if(this.removed)return this;if(n==null){r={};for(s in this.attrs)this.attrs[u](s)&&(r[s]=this.attrs[s]);return this._.rt.deg&&(r.rotation=this.rotate()),(this._.sx!=1||this._.sy!=1)&&(r.scale=this.scale()),r.gradient&&r.fill=="none"&&(r.fill=r.gradient)&&delete r.gradient,r}if(i==null&&t.is(n,ti))return n=="translation"?ir.call(this):n=="rotation"?this.rotate():n=="scale"?this.scale():n==bt&&this.attrs.fill=="none"&&this.attrs.gradient?this.attrs.gradient:this.attrs[n];if(i==null&&t.is(n,ht)){for(l={},o=0,a=n.length;o<a;o++)l[n[o]]=this.attr(n[o]);return l}i!=null?(f={},f[n]=i):n!=null&&t.is(n,"object")&&(f=n);for(e in this.paper.customAttributes)if(this.paper.customAttributes[u](e)&&f[u](e)&&t.is(this.paper.customAttributes[e],"function")){h=this.paper.customAttributes[e].apply(this,[][d](f[e]));this.attrs[e]=f[e];for(c in h)h[u](c)&&(f[c]=h[c])}return gt(this,f),this};v[a].toFront=function(){if(this.removed)return this;this.node.parentNode[f](this.node);var n=this.paper;return n.top!=this&&hu(this,n),this};v[a].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);cu(this,this.paper);var n=this.paper}return this};v[a].insertAfter=function(n){if(this.removed)return this;var t=n.node||n[n.length-1].node;return t.nextSibling?t.parentNode.insertBefore(this.node,t.nextSibling):t.parentNode[f](this.node),lu(this,n,this.paper),this};v[a].insertBefore=function(n){if(this.removed)return this;var t=n.node||n[0].node;return t.parentNode.insertBefore(this.node,t),au(this,n,this.paper),this};v[a].blur=function(n){var t=this,i,u;+n!=0?(i=r("filter"),u=r("feGaussianBlur"),t.attrs.blur=n,i.id=yi(),r(u,{stdDeviation:+n||1.5}),i.appendChild(u),t.paper.defs.appendChild(i),t._blur=i,r(t.node,{filter:"url(#"+i.id+")"})):(t._blur&&(t._blur.parentNode.removeChild(t._blur),delete t._blur,delete t.attrs.blur),t.node.removeAttribute("filter"))};var wu=function(n,t,i,u){var o=r("circle"),e;return n.canvas&&n.canvas[f](o),e=new v(o,n),e.attrs={cx:t,cy:i,r:u,fill:"none",stroke:"#000"},e.type="circle",r(o,e.attrs),e},bu=function(n,t,i,u,e,o){var h=r("rect"),s;return n.canvas&&n.canvas[f](h),s=new v(h,n),s.attrs={x:t,y:i,width:u,height:e,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},s.type="rect",r(h,s.attrs),s},ku=function(n,t,i,u,e){var s=r("ellipse"),o;return n.canvas&&n.canvas[f](s),o=new v(s,n),o.attrs={cx:t,cy:i,rx:u,ry:e,fill:"none",stroke:"#000"},o.type="ellipse",r(s,o.attrs),o},du=function(n,t,i,u,e,o){var s=r("image"),h;return r(s,{x:i,y:u,width:e,height:o,preserveAspectRatio:"none"}),s.setAttributeNS(n.xlink,"href",t),n.canvas&&n.canvas[f](s),h=new v(s,n),h.attrs={x:i,y:u,width:e,height:o,src:t},h.type="image",h},gu=function(n,t,i,u){var o=r("text"),e;return r(o,{x:t,y:i,"text-anchor":"middle"}),n.canvas&&n.canvas[f](o),e=new v(o,n),e.attrs={x:t,y:i,"text-anchor":"middle",text:u,font:li.font,stroke:"none",fill:"#000"},e.type="text",gt(e,e.attrs),e},nf=function(n,t){return this.width=n||this.width,this.height=t||this.height,this.canvas[lt]("width",this.width),this.canvas[lt]("height",this.height),this},vr=function(){var u=su[k](0,arguments),n=u&&u.container,h=u.x,c=u.y,o=u.width,s=u.height,i;if(!n)throw new Error("SVG container not found.");return i=r("svg"),h=h||0,c=c||0,o=o||512,s=s||342,r(i,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:o,height:s}),n==1?(i.style.cssText="position:absolute;left:"+h+"px;top:"+c+"px",e.body[f](i)):n.firstChild?n.insertBefore(i,n.firstChild):n[f](i),n=new hi,n.width=o,n.height=s,n.canvas=i,lr.call(n,n,t.fn),n.clear(),n};b.clear=function(){for(var n=this.canvas;n.firstChild;)n.removeChild(n.firstChild);this.bottom=this.top=null;(this.desc=r("desc"))[f](e.createTextNode("Created with Raphaël"));n[f](this.desc);n[f](this.defs=r("defs"))};b.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var n in this)this[n]=vu(n)}}if(t.vml){var tf={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},re=/([clmz]),?([^clmz]*)/gi,ue=/ progid:\S+Blur\([^\)]+\)/g,fe=/-?[^,\s-]+/g,oi=1e3+g+1e3,ui=10,si={path:1,rect:1},ee=function(n){var e=/[ahqstv]/ig,s=fi,c,f,l,t,r,v,u,a;if(h(n).match(e)&&(s=gi),e=/[clmz]/g,s==fi&&!h(n).match(e))return h(n)[ut](re,function(n,t,r){var u=[],e=ni.call(t)=="m",f=tf[t];return r[ut](fe,function(n){e&&u[i]==2&&(f+=u+tf[t=="m"?"l":"L"],u=[]);u[y](rt(n*ui))}),f+u});for(f=s(n),c=[],r=0,v=f[i];r<v;r++){for(l=f[r],t=ni.call(f[r][0]),t=="z"&&(t="x"),u=1,a=l[i];u<a;u++)t+=rt(l[u]*ui)+(u!=a-1?",":o);c[y](t)}return c[tt](g)};t[pt]=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};yu=function(n,t){var i=et("group"),r,e,u,s;return i.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",i.coordsize=t.coordsize,i.coordorigin=t.coordorigin,r=et("shape"),e=r.style,e.width=t.width+"px",e.height=t.height+"px",r.coordsize=oi,r.coordorigin=t.coordorigin,i[f](r),u=new v(r,i,t),s={fill:"none",stroke:"#000"},n&&(s.path=n),u.type="path",u.path=[],u.Path=o,gt(u,s),t.canvas[f](i),u};gt=function(n,r){var tt,k,y,st,d,ht,v,lt,at,nt,vt;n.attrs=n.attrs||{};var l=n.node,c=n.attrs,p=l.style,b,pt=(r.x!=c.x||r.y!=c.y||r.width!=c.width||r.height!=c.height||r.r!=c.r)&&n.type=="rect",a=n;for(tt in r)r[u](tt)&&(c[tt]=r[tt]);if(pt&&(c.path=rf(c.x,c.y,c.width,c.height,c.r),n.X=c.x,n.Y=c.y,n.W=c.width,n.H=c.height),r.href&&(l.href=r.href),r.title&&(l.title=r.title),r.target&&(l.target=r.target),r.cursor&&(p.cursor=r.cursor),"blur"in r&&n.blur(r.blur),(r.path&&n.type=="path"||pt)&&(l.path=ee(c.path)),r.rotation!=null&&n.rotate(r.rotation,!0),r.translation&&(b=h(r.translation)[w](ct),ir.call(n,b[0],b[1]),n._.rt.cx!=null&&(n._.rt.cx+=+b[0],n._.rt.cy+=+b[1],n.setBox(n.attrs,b[0],b[1]))),r.scale&&(b=h(r.scale)[w](ct),n.scale(+b[0]||1,+b[1]||+b[0]||1,+b[2]||null,+b[3]||null)),"clip-rect"in r){if(k=h(r["clip-rect"])[w](ct),k[i]==4){k[2]=+k[2]+ +k[0];k[3]=+k[3]+ +k[1];var it=l.clipRect||e.createElement("div"),g=it.style,ft=l.parentNode;g.clip=t.format("rect({1}px {2}px {3}px {0}px)",k);l.clipRect||(g.position="absolute",g.top=0,g.left=0,g.width=n.paper.width+"px",g.height=n.paper.height+"px",ft.parentNode.insertBefore(it,ft),it[f](ft),l.clipRect=it)}r["clip-rect"]||l.clipRect&&(l.clipRect.style.clip=o)}if(n.type=="image"&&r.src&&(l.src=r.src),n.type=="image"&&r.opacity&&(l.filterOpacity=or+".Alpha(opacity="+r.opacity*100+")",p.filter=(l.filterMatrix||o)+(l.filterOpacity||o)),r.font&&(p.font=r.font),r["font-family"]&&(p.fontFamily='"'+r["font-family"][w](",")[0][ut](/^['"]+|['"]+$/g,o)+'"'),r["font-size"]&&(p.fontSize=r["font-size"]),r["font-weight"]&&(p.fontWeight=r["font-weight"]),r["font-style"]&&(p.fontStyle=r["font-style"]),(r.opacity!=null||r["stroke-width"]!=null||r.fill!=null||r.stroke!=null||r["stroke-width"]!=null||r["stroke-opacity"]!=null||r["fill-opacity"]!=null||r["stroke-dasharray"]!=null||r["stroke-miterlimit"]!=null||r["stroke-linejoin"]!=null||r["stroke-linecap"]!=null)&&(l=n.shape||l,y=l.getElementsByTagName(bt)&&l.getElementsByTagName(bt)[0],st=!1,y||(st=y=et(bt)),("fill-opacity"in r||"opacity"in r)&&(d=((+c["fill-opacity"]+1||2)-1)*((+c.opacity+1||2)-1)*((+t.getRGB(r.fill).o+1||2)-1),d=yt(ot(d,0),1),y.opacity=d),r.fill&&(y.on=!0),(y.on==null||r.fill=="none")&&(y.on=!1),y.on&&r.fill&&(ht=r.fill.match(iu),ht?(y.src=ht[1],y.type="tile"):(y.color=t.getRGB(r.fill).hex,y.src=o,y.type="solid",t.getRGB(r.fill).error&&(a.type in{circle:1,ellipse:1}||h(r.fill).charAt()!="r")&&ei(a,r.fill)&&(c.fill="none",c.gradient=r.fill))),st&&l[f](y),v=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0],lt=!1,v||(lt=v=et("stroke")),(r.stroke&&r.stroke!="none"||r["stroke-width"]||r["stroke-opacity"]!=null||r["stroke-dasharray"]||r["stroke-miterlimit"]||r["stroke-linejoin"]||r["stroke-linecap"])&&(v.on=!0),(r.stroke=="none"||v.on==null||r.stroke==0||r["stroke-width"]==0)&&(v.on=!1),at=t.getRGB(r.stroke),v.on&&r.stroke&&(v.color=at.hex),d=((+c["stroke-opacity"]+1||2)-1)*((+c.opacity+1||2)-1)*((+at.o+1||2)-1),nt=(s(r["stroke-width"])||1)*.75,d=yt(ot(d,0),1),r["stroke-width"]==null&&(nt=c["stroke-width"]),r["stroke-width"]&&(v.weight=nt),nt&&nt<1&&(d*=nt)&&(v.weight=1),v.opacity=d,r["stroke-linejoin"]&&(v.joinstyle=r["stroke-linejoin"]||"miter"),v.miterlimit=r["stroke-miterlimit"]||8,r["stroke-linecap"]&&(v.endcap=r["stroke-linecap"]=="butt"?"flat":r["stroke-linecap"]=="square"?"square":"round"),r["stroke-dasharray"]&&(vt={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},v.dashstyle=vt[u](r["stroke-dasharray"])?vt[r["stroke-dasharray"]]:o),lt&&l[f](v)),a.type=="text"){p=a.paper.span.style;c.font&&(p.font=c.font);c["font-family"]&&(p.fontFamily=c["font-family"]);c["font-size"]&&(p.fontSize=c["font-size"]);c["font-weight"]&&(p.fontWeight=c["font-weight"]);c["font-style"]&&(p.fontStyle=c["font-style"]);a.node.string&&(a.paper.span.innerHTML=h(a.node.string)[ut](/</g,"&#60;")[ut](/&/g,"&#38;")[ut](/\n/g,"<br>"));a.W=c.w=a.paper.span.offsetWidth;a.H=c.h=a.paper.span.offsetHeight;a.X=c.x;a.Y=c.y+rt(a.H/2);switch(c["text-anchor"]){case"start":a.node.style["v-text-align"]="left";a.bbx=rt(a.W/2);break;case"end":a.node.style["v-text-align"]="right";a.bbx=-rt(a.W/2);break;default:a.node.style["v-text-align"]="center"}}};ei=function(n,t){var e,u,l,f,b;n.attrs=n.attrs||{};var k=n.attrs,r,a="linear",v=".5 .5";if((n.attrs.gradient=t,t=h(t)[ut](ru,function(n,t,i){return a="radial",t&&i&&(t=s(t),i=s(i),p(t-.5,2)+p(i-.5,2)>.25&&(i=c.sqrt(.25-p(t-.5,2))*((i>.5)*2-1)+.5),v=t+g+i),o}),t=t[w](/\s*\-\s*/),a=="linear"&&(e=t.shift(),e=-s(e),isNaN(e)))||(u=ou(t),!u))return null;if(n=n.shape||n.node,r=n.getElementsByTagName(bt)[0]||et(bt),r.parentNode||n.appendChild(r),u[i]){for(r.on=!0,r.method="none",r.color=u[0].color,r.color2=u[u[i]-1].color,l=[],f=0,b=u[i];f<b;f++)u[f].offset&&l[y](u[f].offset+g+u[f].color);r.colors&&(r.colors.value=l[i]?l[tt]():"0% "+r.color);a=="radial"?(r.type="gradientradial",r.focus="100%",r.focussize=v,r.focusposition=v):(r.type="gradient",r.angle=(270-e)%360)}return 1};v=function(n,i,r){this[0]=n;this.id=t._oid++;this.node=n;n.raphael=this;this.X=0;this.Y=0;this.attrs={};this.Group=i;this.paper=r;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};r.bottom||(r.bottom=this);this.prev=r.top;r.top&&(r.top.next=this);r.top=this;this.next=null};l=v[a];l.rotate=function(n,t,r){return this.removed?this:n==null?this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][tt](g):this._.rt.deg:(n=h(n)[w](ct),n[i]-1&&(t=s(n[1]),r=s(n[2])),n=s(n[0]),t!=null?this._.rt.deg=n:this._.rt.deg+=n,r==null&&(t=null),this._.rt.cx=t,this._.rt.cy=r,this.setBox(this.attrs,t,r),this.Group.style.rotation=this._.rt.deg,this)};l.setBox=function(n,t,i){var a,e,w,f,s,h,c,l,p,v,y,r;if(this.removed)return this;a=this.Group.style;e=this.shape&&this.shape.style||this.node.style;n=n||{};for(w in n)n[u](w)&&(this.attrs[w]=n[w]);t=t||this._.rt.cx;i=i||this._.rt.cy;f=this.attrs;switch(this.type){case"circle":s=f.cx-f.r;h=f.cy-f.r;c=l=f.r*2;break;case"ellipse":s=f.cx-f.rx;h=f.cy-f.ry;c=f.rx*2;l=f.ry*2;break;case"image":s=+f.x;h=+f.y;c=f.width||0;l=f.height||0;break;case"text":this.textpath.v=["m",rt(f.x),", ",rt(f.y-2),"l",rt(f.x)+1,", ",rt(f.y-2)][tt](o);s=f.x-rt(this.W/2);h=f.y-this.H/2;c=this.W;l=this.H;break;case"rect":case"path":this.attrs.path?(p=wi(this.attrs.path),s=p.x,h=p.y,c=p.width,l=p.height):(s=0,h=0,c=this.paper.width,l=this.paper.height);break;default:s=0;h=0;c=this.paper.width;l=this.paper.height}t=t==null?s+c/2:t;i=i==null?h+l/2:i;v=t-this.paper.width/2;y=i-this.paper.height/2;a.left!=(r=v+"px")&&(a.left=r);a.top!=(r=y+"px")&&(a.top=r);this.X=si[u](this.type)?-v:s;this.Y=si[u](this.type)?-y:h;this.W=c;this.H=l;si[u](this.type)?(e.left!=(r=-v*ui+"px")&&(e.left=r),e.top!=(r=-y*ui+"px")&&(e.top=r)):this.type=="text"?(e.left!=(r=-v+"px")&&(e.left=r),e.top!=(r=-y+"px")&&(e.top=r)):(a.width!=(r=this.paper.width+"px")&&(a.width=r),a.height!=(r=this.paper.height+"px")&&(a.height=r),e.left!=(r=s-v+"px")&&(e.left=r),e.top!=(r=h-y+"px")&&(e.top=r),e.width!=(r=c+"px")&&(e.width=r),e.height!=(r=l+"px")&&(e.height=r))};l.hide=function(){return this.removed||(this.Group.style.display="none"),this};l.show=function(){return this.removed||(this.Group.style.display="block"),this};l.getBBox=function(){return this.removed?this:si[u](this.type)?wi(this.attrs.path):{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};l.remove=function(){if(!this.removed){ri(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var n in this)delete this[n];this.removed=!0}};l.attr=function(n,r){var e,o,v,a,f,s,c,l;if(this.removed)return this;if(n==null){e={};for(o in this.attrs)this.attrs[u](o)&&(e[o]=this.attrs[o]);return this._.rt.deg&&(e.rotation=this.rotate()),(this._.sx!=1||this._.sy!=1)&&(e.scale=this.scale()),e.gradient&&e.fill=="none"&&(e.fill=e.gradient)&&delete e.gradient,e}if(r==null&&t.is(n,"string"))return n=="translation"?ir.call(this):n=="rotation"?this.rotate():n=="scale"?this.scale():n==bt&&this.attrs.fill=="none"&&this.attrs.gradient?this.attrs.gradient:this.attrs[n];if(this.attrs&&r==null&&t.is(n,ht)){for(a={},o=0,v=n[i];o<v;o++)a[n[o]]=this.attr(n[o]);return a}if(r!=null&&(f={},f[n]=r),r==null&&t.is(n,"object")&&(f=n),f){for(s in this.paper.customAttributes)if(this.paper.customAttributes[u](s)&&f[u](s)&&t.is(this.paper.customAttributes[s],"function")){c=this.paper.customAttributes[s].apply(this,[][d](f[s]));this.attrs[s]=f[s];for(l in c)c[u](l)&&(f[l]=c[l])}f.text&&this.type=="text"&&(this.node.string=f.text);gt(this,f);f.gradient&&({circle:1,ellipse:1}[u](this.type)||h(f.gradient).charAt()!="r")&&ei(this,f.gradient);(!si[u](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};l.toFront=function(){return this.removed||this.Group.parentNode[f](this.Group),this.paper.top!=this&&hu(this,this.paper),this};l.toBack=function(){return this.removed?this:(this.Group.parentNode.firstChild!=this.Group&&(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),cu(this,this.paper)),this)};l.insertAfter=function(n){return this.removed?this:(n.constructor==st&&(n=n[n.length-1]),n.Group.nextSibling?n.Group.parentNode.insertBefore(this.Group,n.Group.nextSibling):n.Group.parentNode[f](this.Group),lu(this,n,this.paper),this)};l.insertBefore=function(n){return this.removed?this:(n.constructor==st&&(n=n[0]),n.Group.parentNode.insertBefore(this.Group,n.Group),au(this,n,this.paper),this)};l.blur=function(n){var i=this.node.runtimeStyle,r=i.filter;r=r.replace(ue,o);+n!=0?(this.attrs.blur=n,i.filter=r+g+or+".Blur(pixelradius="+(+n||1.5)+")",i.margin=t.format("-{0}px 0 0 -{0}px",rt(+n||1.5))):(i.filter=r,i.margin=0,delete this.attrs.blur)};wu=function(n,t,i,r){var e=et("group"),o=et("oval"),s=o.style,u;return e.style.cssText="position:absolute;left:0;top:0;width:"+n.width+"px;height:"+n.height+"px",e.coordsize=oi,e.coordorigin=n.coordorigin,e[f](o),u=new v(o,e,n),u.type="circle",gt(u,{stroke:"#000",fill:"none"}),u.attrs.cx=t,u.attrs.cy=i,u.attrs.r=r,u.setBox({x:t-r,y:i-r,width:r*2,height:r*2}),n.canvas[f](e),u};function rf(n,i,r,u,f){return f?t.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",n+f,i,r-f*2,f,-f,u-f*2,f*2-r,f*2-u):t.format("M{0},{1}l{2},0,0,{3},{4},0z",n,i,r,u,-r)}bu=function(n,t,i,r,u,f){var s=rf(t,i,r,u,f),e=n.path(s),o=e.attrs;return e.X=o.x=t,e.Y=o.y=i,e.W=o.width=r,e.H=o.height=u,o.r=f,o.path=s,e.type="rect",e};ku=function(n,t,i,r,u){var o=et("group"),s=et("oval"),h=s.style,e;return o.style.cssText="position:absolute;left:0;top:0;width:"+n.width+"px;height:"+n.height+"px",o.coordsize=oi,o.coordorigin=n.coordorigin,o[f](s),e=new v(s,o,n),e.type="ellipse",gt(e,{stroke:"#000"}),e.attrs.cx=t,e.attrs.cy=i,e.attrs.rx=r,e.attrs.ry=u,e.setBox({x:t-r,y:i-u,width:r*2,height:u*2}),n.canvas[f](o),e};du=function(n,t,i,r,u,e){var s=et("group"),h=et("image"),o;return s.style.cssText="position:absolute;left:0;top:0;width:"+n.width+"px;height:"+n.height+"px",s.coordsize=oi,s.coordorigin=n.coordorigin,h.src=t,s[f](h),o=new v(h,s,n),o.type="image",o.attrs.src=t,o.attrs.x=i,o.attrs.y=r,o.attrs.w=u,o.attrs.h=e,o.setBox({x:i,y:r,width:u,height:e}),n.canvas[f](s),o};gu=function(n,i,r,u){var o=et("group"),s=et("shape"),a=s.style,c=et("path"),y=c.style,l=et("textpath"),e;return o.style.cssText="position:absolute;left:0;top:0;width:"+n.width+"px;height:"+n.height+"px",o.coordsize=oi,o.coordorigin=n.coordorigin,c.v=t.format("m{0},{1}l{2},{1}",rt(i*10),rt(r*10),rt(i*10)+1),c.textpathok=!0,a.width=n.width,a.height=n.height,l.string=h(u),l.on=!0,s[f](l),s[f](c),o[f](s),e=new v(l,o,n),e.shape=s,e.textpath=c,e.type="text",e.attrs.text=u,e.attrs.x=i,e.attrs.y=r,e.attrs.w=1,e.attrs.h=1,gt(e,{font:li.font,stroke:"none",fill:"#000"}),e.setBox(),n.canvas[f](o),e};nf=function(n,t){var i=this.canvas.style;return n==+n&&(n+="px"),t==+t&&(t+="px"),i.width=n,i.height=t,i.clip="rect(0 "+n+" "+t+" 0)",this};e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{e.namespaces.rvml||e.namespaces.add("rvml","urn:schemas-microsoft-com:vml");et=function(n){return e.createElement("<rvml:"+n+' class="rvml">')}}catch(ye){et=function(n){return e.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}vr=function(){var o=su[k](0,arguments),i=o.container,r=o.height,u=o.width,c=o.x,l=o.y;if(!i)throw new Error("VML container not found.");var n=new hi,s=n.canvas=e.createElement("div"),h=s.style;return c=c||0,l=l||0,u=u||512,r=r||342,u==+u&&(u+="px"),r==+r&&(r+="px"),n.width=1e3,n.height=1e3,n.coordsize=ui*1e3+g+ui*1e3,n.coordorigin="0 0",n.span=e.createElement("span"),n.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",s[f](n.span),h.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",u,r),i==1?(e.body[f](s),h.left=c+"px",h.top=l+"px",h.position="absolute"):i.firstChild?i.insertBefore(s,i.firstChild):i[f](s),lr.call(n,n,t.fn),n};b.clear=function(){this.canvas.innerHTML=o;this.span=e.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas[f](this.span);this.bottom=this.top=null};b.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var n in this)this[n]=vu(n);return!0}}yr=navigator.userAgent.match(/Version\/(.*?)\s/);b.safari=navigator.vendor=="Apple Computer, Inc."&&(yr&&yr[1]<4||navigator.platform.slice(0,2)=="iP")?function(){var n=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});dt.setTimeout(function(){n.remove()})}:function(){};var oe=function(){this.returnValue=!1},se=function(){return this.originalEvent.preventDefault()},he=function(){this.cancelBubble=!0},ce=function(){return this.originalEvent.stopPropagation()},le=function(){return e.addEventListener?function(n,t,i,r){var f=fr&&er[t]?er[t]:t,e=function(f){var e,o,s;if(fr&&er[u](t))for(e=0,o=f.targetTouches&&f.targetTouches.length;e<o;e++)if(f.targetTouches[e].target==n){s=f;f=f.targetTouches[e];f.originalEvent=s;f.preventDefault=se;f.stopPropagation=ce;break}return i.call(r,f)};return n.addEventListener(f,e,!1),function(){return n.removeEventListener(f,e,!1),!0}}:e.attachEvent?function(n,t,i,r){var u=function(n){return n=n||dt.event,n.preventDefault=n.preventDefault||oe,n.stopPropagation=n.stopPropagation||he,i.call(r,n)};return n.attachEvent("on"+t,u),function(){return n.detachEvent("on"+t,u),!0}}:void 0}(),at=[],pr=function(n){for(var i=n.clientX,r=n.clientY,s=e.documentElement.scrollTop||e.body.scrollTop,h=e.documentElement.scrollLeft||e.body.scrollLeft,t,o=at.length,f,u;o--;){if(t=at[o],fr){for(f=n.touches.length;f--;)if(u=n.touches[f],u.identifier==t.el._drag.id){i=u.clientX;r=u.clientY;(n.originalEvent?n.originalEvent:n).preventDefault();break}}else n.preventDefault();i+=h;r+=s;t.move&&t.move.call(t.move_scope||t.el,i-t.el._drag.x,r-t.el._drag.y,i,r,n)}},wr=function(n){t.unmousemove(pr).unmouseup(wr);for(var r=at.length,i;r--;)i=at[r],i.el._drag={},i.end&&i.end.call(i.end_scope||i.start_scope||i.move_scope||i.el,n);at=[]};for(br=tu[i];br--;)(function(n){t[n]=v[a][n]=function(i,r){return t.is(i,"function")&&(this.events=this.events||[],this.events.push({name:n,f:i,unbind:le(this.shape||this.node||e,n,i,r||this)})),this};t["un"+n]=v[a]["un"+n]=function(t){for(var r=this.events,u=r[i];u--;)if(r[u].name==n&&r[u].f==t)return r[u].unbind(),r.splice(u,1),r.length||delete this.events,this;return this}})(tu[br]);l.hover=function(n,t,i,r){return this.mouseover(n,i).mouseout(t,r||i)};l.unhover=function(n,t){return this.unmouseover(n).unmouseout(t)};l.drag=function(n,i,r,u,f,o){return this._drag={},this.mousedown(function(s){(s.originalEvent||s).preventDefault();var h=e.documentElement.scrollTop||e.body.scrollTop,c=e.documentElement.scrollLeft||e.body.scrollLeft;this._drag.x=s.clientX+c;this._drag.y=s.clientY+h;this._drag.id=s.identifier;i&&i.call(f||u||this,s.clientX+c,s.clientY+h,s);at.length||t.mousemove(pr).mouseup(wr);at.push({el:this,move:n,end:r,move_scope:u,start_scope:f,end_scope:o})}),this};l.undrag=function(n,i,r){for(var u=at.length;u--;)at[u].el==this&&at[u].move==n&&at[u].end==r&&at.splice(u++,1);at.length||t.unmousemove(pr).unmouseup(wr)};b.circle=function(n,t,i){return wu(this,n||0,t||0,i||0)};b.rect=function(n,t,i,r,u){return bu(this,n||0,t||0,i||0,r||0,u||0)};b.ellipse=function(n,t,i,r){return ku(this,n||0,t||0,i||0,r||0)};b.path=function(n){return!n||t.is(n,ti)||t.is(n[0],ht)||(n+=o),yu(t.format[k](t,arguments),this)};b.image=function(n,t,i,r,u){return du(this,n||"about:blank",t||0,i||0,r||0,u||0)};b.text=function(n,t,i){return gu(this,n||0,t||0,h(i))};b.set=function(n){return arguments[i]>1&&(n=Array[a].splice.call(arguments,0,arguments[i])),new st(n)};b.setSize=nf;b.top=b.bottom=null;b.raphael=t;l.resetScale=function(){if(this.removed)return this;this._.sx=1;this._.sy=1;this.attrs.scale="1 1"};l.scale=function(n,t,r,u){var k,it,f,et,ot,y,gt,e,w,s,p,b;if(this.removed)return this;if(n==null&&t==null)return{x:this._.sx,y:this._.sy,toString:uf};if(t=t||n,+t||(t=n),f=this.attrs,n!=0){var rt=this.getBBox(),st=rt.x+rt.width/2,ht=rt.y+rt.height/2,a=nt(n/this._.sx),v=nt(t/this._.sy);r=+r||r==0?r:st;u=+u||u==0?u:ht;var vt=this._.sx>0,yt=this._.sy>0,h=~~(n/nt(n)),c=~~(t/nt(t)),pt=a*h,wt=v*c,bt=this.node.style,ut=r+nt(st-r)*pt*(st>r==vt?1:-1),ft=u+nt(ht-u)*wt*(ht>u==yt?1:-1),kt=n*h>t*c?v:a;switch(this.type){case"rect":case"image":et=f.width*a;ot=f.height*v;this.attr({height:ot,r:f.r*kt,width:et,x:ut-et/2,y:ft-ot/2});break;case"circle":case"ellipse":this.attr({rx:f.rx*a,ry:f.ry*v,r:f.r*kt,cx:ut,cy:ft});break;case"text":this.attr({x:ut,y:ft});break;case"path":var l=cr(f.path),dt=!0,ct=vt?pt:a,at=yt?wt:v;for(y=0,gt=l[i];y<gt;y++){if(e=l[y],w=ci.call(e[0]),w=="M"&&dt)continue;else dt=!1;if(w=="A")e[l[y][i]-2]*=ct,e[l[y][i]-1]*=at,e[1]*=a,e[2]*=v,e[5]=+(h+c?!!+e[5]:!+e[5]);else if(w=="H")for(s=1,p=e[i];s<p;s++)e[s]*=ct;else if(w=="V")for(s=1,p=e[i];s<p;s++)e[s]*=at;else for(s=1,p=e[i];s<p;s++)e[s]*=s%2?ct:at}b=wi(l);k=ut-b.x-b.width/2;it=ft-b.y-b.height/2;l[0][1]+=k;l[0][2]+=it;this.attr({path:l})}this.type in{text:1,image:1}&&(h!=1||c!=1)?this.transformations?(this.transformations[2]="scale("[d](h,",",c,")"),this.node[lt]("transform",this.transformations[tt](g)),k=h==-1?-f.x-(et||0):f.x,it=c==-1?-f.y-(ot||0):f.y,this.attr({x:k,y:it}),f.fx=h-1,f.fy=c-1):(this.node.filterMatrix=or+".Matrix(M11="[d](h,", M12=0, M21=0, M22=",c,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),bt.filter=(this.node.filterMatrix||o)+(this.node.filterOpacity||o)):this.transformations?(this.transformations[2]=o,this.node[lt]("transform",this.transformations[tt](g)),f.fx=0,f.fy=0):(this.node.filterMatrix=o,bt.filter=(this.node.filterMatrix||o)+(this.node.filterOpacity||o));f.scale=[n,t,r,u][tt](g);this._.sx=n;this._.sy=t}return this};l.clone=function(){if(this.removed)return null;var n=this.attr();return delete n.scale,delete n.translation,this.paper[this.type]().attr(n)};var kr={},nr=function(n,i,r,u,f,e,o,s,h){var y=0,v=100,w=[n,i,r,u,f,e,o,s].join(),c=kr[w],b,a,k,l;for(c||(kr[w]=c={data:[]}),c.timer&&clearTimeout(c.timer),c.timer=setTimeout(function(){delete kr[w]},2e3),h!=null&&(k=nr(n,i,r,u,f,e,o,s),v=~~k*10),l=0;l<v+1;l++){if(c.data[h]>l?a=c.data[l*v]:(a=t.findDotsAtSegment(n,i,r,u,f,e,o,s,l/v),c.data[l]=a),l&&(y+=p(p(b.x-a.x,2)+p(b.y-a.y,2),.5)),h!=null&&y>=h)return a;b=a}if(h==null)return y},dr=function(n,i){return function(r,u,f){var y,p;r=gi(r);var s,h,e,a,c="",v={},o,l=0;for(y=0,p=r.length;y<p;y++){if(e=r[y],e[0]=="M")s=+e[1],h=+e[2];else{if(a=nr(s,h,e[1],e[2],e[3],e[4],e[5],e[6]),l+a>u){if(i&&!v.start){if(o=nr(s,h,e[1],e[2],e[3],e[4],e[5],e[6],u-l),c+=["C",o.start.x,o.start.y,o.m.x,o.m.y,o.x,o.y],f)return c;v.start=c;c=["M",o.x,o.y+"C",o.n.x,o.n.y,o.end.x,o.end.y,e[5],e[6]][tt]();l+=a;s=+e[5];h=+e[6];continue}if(!n&&!i)return o=nr(s,h,e[1],e[2],e[3],e[4],e[5],e[6],u-l),{x:o.x,y:o.y,alpha:o.alpha}}l+=a;s=+e[5];h=+e[6]}c+=e}return v.end=c,o=n?l:i?v:t.findDotsAtSegment(s,h,e[1],e[2],e[3],e[4],e[5],e[6],1),o.alpha&&(o={x:o.x,y:o.y,alpha:o.alpha}),o}},ff=dr(1),tr=dr(),gr=dr(0,1);l.getTotalLength=function(){if(this.type=="path")return this.node.getTotalLength?this.node.getTotalLength():ff(this.attrs.path)};l.getPointAtLength=function(n){if(this.type=="path")return tr(this.attrs.path,n)};l.getSubpath=function(n,t){if(this.type=="path"){if(nt(this.getTotalLength()-t)<"1e-6")return gr(this.attrs.path,n).end;var i=gr(this.attrs.path,t,1);return n?gr(i,n).end:i}};t.easing_formulas={linear:function(n){return n},"<":function(n){return p(n,3)},">":function(n){return p(n-1,3)+1},"<>":function(n){return(n=n*2,n<1)?p(n,3)/2:(n-=2,(p(n,3)+2)/2)},backIn:function(n){var t=1.70158;return n*n*((t+1)*n-t)},backOut:function(n){n=n-1;var t=1.70158;return n*n*((t+1)*n+t)+1},elastic:function(n){if(n==0||n==1)return n;var t=.3,i=t/4;return p(2,-10*n)*c.sin((n-i)*2*ft/t)+1},bounce:function(n){var r=7.5625,t=2.75,i;return n<1/t?i=r*n*n:n<2/t?(n-=1.5/t,i=r*n*n+.75):n<2.5/t?(n-=2.25/t,i=r*n*n+.9375):(n-=2.625/t,i=r*n*n+.984375),i}};var vt=[],ef=function(){for(var y,a,n,v,e,ft,w,et,k,d,ot,st=+new Date,b=0;b<vt[i];b++)if(y=vt[b],!y.stop&&!y.el.removed){var nt=st-y.start,c=y.ms,ht=y.easing,s=y.from,r=y.diff,h=y.to,p=y.t,l=y.el,ut={},f;if(nt<c){a=ht(nt/c);for(n in s)if(s[u](n)){switch(sr[n]){case"along":f=a*c*r[n];h.back&&(f=h.len-f);v=tr(h[n],f);l.translate(r.sx-r.x||0,r.sy-r.y||0);r.x=v.x;r.y=v.y;l.translate(v.x-r.sx,v.y-r.sy);h.rot&&l.rotate(r.r+v.alpha,v.x,v.y);break;case it:f=+s[n]+a*c*r[n];break;case"colour":f="rgb("+[nu(rt(s[n].r+a*c*r[n].r)),nu(rt(s[n].g+a*c*r[n].g)),nu(rt(s[n].b+a*c*r[n].b))][tt](",")+")";break;case"path":for(f=[],e=0,ft=s[n][i];e<ft;e++){for(f[e]=[s[n][e][0]],w=1,et=s[n][e][i];w<et;w++)f[e][w]=+s[n][e][w]+a*c*r[n][e][w];f[e]=f[e][tt](g)}f=f[tt](g);break;case"csv":switch(n){case"translation":k=a*c*r[n][0]-p.x;d=a*c*r[n][1]-p.y;p.x+=k;p.y+=d;f=k+g+d;break;case"rotation":f=+s[n][0]+a*c*r[n][0];s[n][1]&&(f+=","+s[n][1]+","+s[n][2]);break;case"scale":f=[+s[n][0]+a*c*r[n][0],+s[n][1]+a*c*r[n][1],2 in h[n]?h[n][2]:o,3 in h[n]?h[n][3]:o][tt](g);break;case"clip-rect":for(f=[],e=4;e--;)f[e]=+s[n][e]+a*c*r[n][e]}break;default:for(ot=[].concat(s[n]),f=[],e=l.paper.customAttributes[n].length;e--;)f[e]=+ot[e]+a*c*r[n][e]}ut[n]=f}l.attr(ut);l._run&&l._run.call(l)}else h.along&&(v=tr(h.along,h.len*!h.back),l.translate(r.sx-(r.x||0)+v.x-r.sx,r.sy-(r.y||0)+v.y-r.sy),h.rot&&l.rotate(r.r+v.alpha,v.x,v.y)),(p.x||p.y)&&l.translate(-p.x,-p.y),h.scale&&(h.scale+=o),l.attr(h),vt.splice(b--,1)}t.svg&&l&&l.paper&&l.paper.safari();vt[i]&&setTimeout(ef)},ae=function(n,i,r,u,f){var e=r-u;i.timeouts.push(setTimeout(function(){t.is(f,"function")&&f.call(i);i.animate(n,e,n.easing)},u))},nu=function(n){return ot(yt(n,255),0)},ir=function(n,t){if(n==null)return{x:this._.tx,y:this._.ty,toString:uf};this._.tx+=+n;this._.ty+=+t;switch(this.type){case"circle":case"ellipse":this.attr({cx:+n+this.attrs.cx,cy:+t+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+n+this.attrs.x,y:+t+this.attrs.y});break;case"path":var i=cr(this.attrs.path);i[0][1]+=+n;i[0][2]+=+t;this.attr({path:i})}return this};l.animateWith=function(n,t,i,r,u){for(var f=0,e=vt.length;f<e;f++)vt[f].el.id==n.id&&(t.start=vt[f].start);return this.animate(t,i,r,u)};l.animateAlong=of();l.animateAlongBack=of(1);l.onAnimation=function(n){return this._run=n||0,this};l.animate=function(n,r,f,e){var v=this,o,rt,et,at,l,ut,g,yt,y,nt,p,ot,k,d,tt;if(v.timeouts=v.timeouts||[],(t.is(f,"function")||!f)&&(e=f||null),v.removed)return e&&e.call(v),v;var c={},b={},st=!1,a={};for(o in n)if(n[u](o)&&(sr[u](o)||v.paper.customAttributes[u](o))){st=!0;c[o]=v.attr(o);c[o]==null&&(c[o]=li[o]);b[o]=n[o];switch(sr[o]){case"along":var ft=ff(n[o]),ht=tr(n[o],ft*!!n.back),lt=v.getBBox();a[o]=ft/r;a.tx=lt.x;a.ty=lt.y;a.sx=ht.x;a.sy=ht.y;b.rot=n.rot;b.back=n.back;b.len=ft;n.rot&&(a.r=s(v.rotate())||0);break;case it:a[o]=(b[o]-c[o])/r;break;case"colour":c[o]=t.getRGB(c[o]);rt=t.getRGB(b[o]);a[o]={r:(rt.r-c[o].r)/r,g:(rt.g-c[o].g)/r,b:(rt.b-c[o].b)/r};break;case"path":for(et=gi(c[o],b[o]),c[o]=et[0],at=et[1],a[o]=[],l=0,ut=c[o][i];l<ut;l++)for(a[o][l]=[0],g=1,yt=c[o][l][i];g<yt;g++)a[o][l][g]=(at[l][g]-c[o][l][g])/r;break;case"csv":y=h(n[o])[w](ct);nt=h(c[o])[w](ct);switch(o){case"translation":c[o]=[0,0];a[o]=[y[0]/r,y[1]/r];break;case"rotation":c[o]=nt[1]==y[1]&&nt[2]==y[2]?nt:[0,y[1],y[2]];a[o]=[(y[0]-c[o][0])/r,0,0];break;case"scale":n[o]=y;c[o]=h(c[o])[w](ct);a[o]=[(y[0]-c[o][0])/r,(y[1]-c[o][1])/r,0,0];break;case"clip-rect":for(c[o]=h(c[o])[w](ct),a[o]=[],l=4;l--;)a[o][l]=(y[l]-c[o][l])/r}b[o]=y;break;default:for(y=[].concat(n[o]),nt=[].concat(c[o]),a[o]=[],l=v.paper.customAttributes[o][i];l--;)a[o][l]=((y[l]||0)-(nt[l]||0))/r}}if(st)d=t.easing_formulas[f],d||(d=h(f).match(vf),d&&d[i]==5?(tt=d,d=function(n){return ve(n,+tt[1],+tt[2],+tt[3],+tt[4],r)}):d=function(n){return n}),vt.push({start:n.start||+new Date,ms:r,easing:d,from:c,diff:a,to:b,el:v,t:{x:0,y:0}}),t.is(e,"function")&&(v._ac=setTimeout(function(){e.call(v)},r)),vt[i]==1&&setTimeout(ef);else{p=[];for(k in n)n[u](k)&&yf.test(k)&&(o={value:n[k]},k=="from"&&(k=0),k=="to"&&(k=100),o.key=kt(k,10),p.push(o));for(p.sort(df),p[0].key&&p.unshift({key:0,value:v.attrs}),l=0,ut=p[i];l<ut;l++)ae(p[l].value,v,r/100*p[l].key,r/100*(p[l-1]&&p[l-1].key||0),p[l-1]&&p[l-1].value.callback);ot=p[p[i]-1].value.callback;ot&&v.timeouts.push(setTimeout(function(){ot.call(v)},r))}return this};l.stop=function(){for(var n=0;n<vt.length;n++)vt[n].el.id==this.id&&vt.splice(n--,1);for(n=0,ii=this.timeouts&&this.timeouts.length;n<ii;n++)clearTimeout(this.timeouts[n]);return this.timeouts=[],clearTimeout(this._ac),delete this._ac,this};l.translate=function(n,t){return this.attr({translation:n+" "+t})};l[pt]=function(){return"Raphaël’s object"};t.ae=vt;st=function(n){if(this.items=[],this[i]=0,this.type="set",n)for(var t=0,r=n[i];t<r;t++)n[t]&&(n[t].constructor==v||n[t].constructor==st)&&(this[this.items[i]]=this.items[this.items[i]]=n[t],this[i]++)};st[a][y]=function(){for(var n,t,r=0,u=arguments[i];r<u;r++)n=arguments[r],n&&(n.constructor==v||n.constructor==st)&&(t=this.items[i],this[t]=this.items[t]=n,this[i]++);return this};st[a].pop=function(){return delete this[this[i]--],this.items.pop()};for(rr in l)l[u](rr)&&(st[a][rr]=function(n){return function(){for(var t=0,r=this.items[i];t<r;t++)this.items[t][n][k](this.items[t],arguments);return this}}(rr));st[a].attr=function(n,r){var u,e,f,o;if(n&&t.is(n,ht)&&t.is(n[0],"object"))for(u=0,e=n[i];u<e;u++)this.items[u].attr(n[u]);else for(f=0,o=this.items[i];f<o;f++)this.items[f].attr(n,r);return this};st[a].animate=function(n,r,u,f){(t.is(u,"function")||!u)&&(f=u||null);var s=this.items[i],e=s,h,c=this,o;for(f&&(o=function(){--s||f.call(c)}),u=t.is(u,ti)?u:o,h=this.items[--e].animate(n,r,u,o);e--;)this.items[e]&&!this.items[e].removed&&this.items[e].animateWith(h,n,r,u,o);return this};st[a].insertAfter=function(n){for(var t=this.items[i];t--;)this.items[t].insertAfter(n);return this};st[a].getBBox=function(){for(var n,t=[],r=[],u=[],f=[],e=this.items[i];e--;)n=this.items[e].getBBox(),t[y](n.x),r[y](n.y),u[y](n.x+n.width),f[y](n.y+n.height);return t=yt[k](0,t),r=yt[k](0,r),{x:t,y:r,width:ot[k](0,u)-t,height:ot[k](0,f)-r}};st[a].clone=function(n){n=new st;for(var t=0,r=this.items[i];t<r;t++)n[y](this.items[t].clone());return n};t.registerFont=function(n){var i,f,e,r,t,o;if(!n.face)return n;this.fonts=this.fonts||{};i={w:n.w,face:{},glyphs:{}};f=n.face["font-family"];for(e in n.face)n.face[u](e)&&(i.face[e]=n.face[e]);if(this.fonts[f]?this.fonts[f][y](i):this.fonts[f]=[i],!n.svg){i.face["units-per-em"]=kt(n.face["units-per-em"],10);for(r in n.glyphs)if(n.glyphs[u](r)&&(t=n.glyphs[r],i.glyphs[r]={w:t.w,k:{},d:t.d&&"M"+t.d[ut](/[mlcxtrv]/g,function(n){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[n]||"M"})+"z"},t.k))for(o in t.k)t[u](o)&&(i.glyphs[r].k[o]=t.k[o])}return n};b.getFont=function(n,r,f,e){var s,a,c,h,l,v;if(e=e||"normal",f=f||"normal",r=+r||{normal:400,bold:700,lighter:300,bolder:800}[r]||400,t.fonts){if(s=t.fonts[n],!s){a=new RegExp("(^|\\s)"+n[ut](/[^\w\d\s+!~.:_-]/g,o)+"(\\s|$)","i");for(c in t.fonts)if(t.fonts[u](c)&&a.test(c)){s=t.fonts[c];break}}if(s)for(l=0,v=s[i];l<v;l++)if(h=s[l],h.face["font-weight"]==r&&(h.face["font-style"]==f||!h.face["font-style"])&&h.face["font-stretch"]==e)break;return h}};b.print=function(n,r,u,f,e,s,c){var l,it,p,b;s=s||"middle";c=ot(yt(c||0,1),-1);var k=this.set(),v=h(u)[w](o),g=0,rt=o,d;if(t.is(f,u)&&(f=this.getFont(f)),f){d=(e||16)/f.face["units-per-em"];var a=f.face.bbox.split(ct),nt=+a[0],tt=+a[1]+(s=="baseline"?a[3]-a[1]+ +f.face.descent:(a[3]-a[1])/2);for(l=0,it=v[i];l<it;l++)p=l&&f.glyphs[v[l-1]]||{},b=f.glyphs[v[l]],g+=l?(p.w||f.w)+(p.k&&p.k[v[l]]||0)+f.w*c:0,b&&b.d&&k[y](this.path(b.d).attr({fill:"#000",stroke:"none",translation:[g,0]}));k.scale(d,d,nt,tt).translate(n-nt,r-tt)}return k};t.format=function(n,r){var u=t.is(r,ht)?[0][d](r):arguments;return n&&t.is(n,ti)&&u[i]-1&&(n=n[ut](hf,function(n,t){return u[++t]==null?o:u[t]})),n||o};t.ninja=function(){return ur.was?dt.Raphael=ur.is:delete Raphael,t};t.el=l;t.st=st[a];ur.was?dt.Raphael=t:Raphael=t})(),function(n,t,i,r,u,f){function b(n,t){var i=typeof n[t];return i=="function"||!!(i=="object"&&n[t])||i=="unknown"}function gt(n,t){return!!(typeof n[t]=="object"&&n[t])}function ni(n){return Object.prototype.toString.call(n)==="[object Array]"}function yt(){try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return it=Array.prototype.slice.call(n.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),ht=parseInt(it[0],10)>9&&parseInt(it[1],10)>0,n=null,!0}catch(t){return!1}}function ut(){if(!a){a=!0;for(var n=0;n<g.length;n++)g[n]();g.length=0}}function y(n,t){if(a){n.call(t);return}g.push(function(){n.call(t)})}function ti(){var t=parent,n,i;if(w!=="")for(n=0,i=w.split(".");n<i.length;n++)t=t[i[n]];return t.easyXDM}function ii(t){return n.easyXDM=dt,w=t,w&&(c="easyXDM_"+w.replace(".","_")+"_"),e}function pt(n){return n.match(ot)[3]}function ri(n){return n.match(ot)[4]||""}function o(n){var i=n.toLowerCase().match(ot),r=i[2],u=i[3],t=i[4]||"";return(r=="http:"&&t==":80"||r=="https:"&&t==":443")&&(t=""),r+"//"+u+t}function nt(n){if(n=n.replace(kt,"$1/"),!n.match(/^(http||https):\/\//)){var t=n.substring(0,1)==="/"?"":i.pathname;t.substring(t.length-1)!=="/"&&(t=t.substring(0,t.lastIndexOf("/")+1));n=i.protocol+"//"+i.host+t+n}while(at.test(n))n=n.replace(at,"");return n}function d(n,t){var e="",r=n.indexOf("#"),u,i;r!==-1&&(e=n.substring(r),n=n.substring(0,r));u=[];for(i in t)t.hasOwnProperty(i)&&u.push(i+"="+f(t[i]));return n+(vt?"#":n.indexOf("?")==-1?"?":"&")+u.join("&")+e}function p(n){return typeof n=="undefined"}function s(n,t,i){var u;for(var r in t)t.hasOwnProperty(r)&&(r in n?(u=t[r],typeof u=="object"?s(n[r],u,i):i||(n[r]=t[r])):n[r]=t[r]);return n}function ui(){var n=t.body.appendChild(t.createElement("form")),i=n.appendChild(t.createElement("input"));i.name=c+"TEST"+lt;st=i!==n.elements[i.name];t.body.removeChild(n)}function v(n){var i,r;return p(st)&&ui(),st?i=t.createElement('<iframe name="'+n.props.name+'"/>'):(i=t.createElement("IFRAME"),i.name=n.props.name),i.id=i.name=n.props.name,delete n.props.name,n.onLoad&&l(i,"load",n.onLoad),typeof n.container=="string"&&(n.container=t.getElementById(n.container)),n.container||(s(i.style,{position:"absolute",top:"-2000px"}),n.container=t.body),r=n.props.src,delete n.props.src,s(i,n.props),i.border=i.frameBorder=0,i.allowTransparency=!0,n.container.appendChild(i),i.src=r,n.props.src=r,i}function fi(n,t){typeof n=="string"&&(n=[n]);for(var i,r=n.length;r--;)if(i=n[r],i=new RegExp(i.substr(0,1)=="^"?i:"^"+i.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),i.test(t))return!0;return!1}function wt(r){var u=r.protocol,f,c;if(r.isHost=r.isHost||p(h.xdm_p),vt=r.hash||!1,r.props||(r.props={}),r.isHost)r.remote=nt(r.remote),r.channel=r.channel||"default"+lt++,r.secret=Math.random().toString(16).substring(2),p(u)&&(o(i.href)==o(r.remote)?u="4":b(n,"postMessage")||b(t,"postMessage")?u="1":r.swf&&b(n,"ActiveXObject")&&yt()?u="6":navigator.product==="Gecko"&&"frameElement"in n&&navigator.userAgent.indexOf("WebKit")==-1?u="5":r.remoteHelper?(r.remoteHelper=nt(r.remoteHelper),u="2"):u="0");else if(r.channel=h.xdm_c,r.secret=h.xdm_s,r.remote=h.xdm_e,u=h.xdm_p,r.acl&&!fi(r.acl,r.remote))throw new Error("Access denied for "+r.remote);r.protocol=u;switch(u){case"0":if(s(r,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),r.isHost){if(!r.local){for(var a=i.protocol+"//"+i.host,v=t.body.getElementsByTagName("img"),l,y=v.length;y--;)if(l=v[y],l.src.substring(0,a.length)===a){r.local=l.src;break}r.local||(r.local=n)}c={xdm_c:r.channel,xdm_p:0};r.local===n?(r.usePolling=!0,r.useParent=!0,r.local=i.protocol+"//"+i.host+i.pathname+i.search,c.xdm_e=r.local,c.xdm_pa=1):c.xdm_e=nt(r.local);r.container&&(r.useResize=!1,c.xdm_po=1);r.remote=d(r.remote,c)}else s(r,{channel:h.xdm_c,remote:h.xdm_e,useParent:!p(h.xdm_pa),usePolling:!p(h.xdm_po),useResize:r.useParent?!1:r.useResize});f=[new e.stack.HashTransport(r),new e.stack.ReliableBehavior({}),new e.stack.QueueBehavior({encode:!0,maxLength:4e3-r.remote.length}),new e.stack.VerifyBehavior({initiate:r.isHost})];break;case"1":f=[new e.stack.PostMessageTransport(r)];break;case"2":f=[new e.stack.NameTransport(r),new e.stack.QueueBehavior,new e.stack.VerifyBehavior({initiate:r.isHost})];break;case"3":f=[new e.stack.NixTransport(r)];break;case"4":f=[new e.stack.SameOriginTransport(r)];break;case"5":f=[new e.stack.FrameElementTransport(r)];break;case"6":it||yt();f=[new e.stack.FlashTransport(r)]}return f.push(new e.stack.QueueBehavior({lazy:r.lazy,remove:!0})),f}function bt(n){for(var i,u={incoming:function(n,t){this.up.incoming(n,t)},outgoing:function(n,t){this.down.outgoing(n,t)},callback:function(n){this.up.callback(n)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},t=0,r=n.length;t<r;t++)i=n[t],s(i,u,!0),t!==0&&(i.down=n[t-1]),t!==r-1&&(i.up=n[t+1]);return i}function ei(n){n.up.down=n.down;n.down.up=n.up;n.up=n.down=null}var tt=this,lt=Math.floor(Math.random()*1e4),et=Function.prototype,ot=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,at=/[\-\w]+\/\.\.\//,kt=/([^:])\/\//g,w="",e={},dt=n.easyXDM,c="easyXDM_",st,vt=!1,it,ht,l,k,a,g,rt,ct,h,ft;if(b(n,"addEventListener"))l=function(n,t,i){n.addEventListener(t,i,!1)},k=function(n,t,i){n.removeEventListener(t,i,!1)};else if(b(n,"attachEvent"))l=function(n,t,i){n.attachEvent("on"+t,i)},k=function(n,t,i){n.detachEvent("on"+t,i)};else throw new Error("Browser not supported");a=!1;g=[];"readyState"in t?(rt=t.readyState,a=rt=="complete"||~navigator.userAgent.indexOf("AppleWebKit/")&&(rt=="loaded"||rt=="interactive")):a=!!t.body;a||(b(n,"addEventListener")?l(t,"DOMContentLoaded",ut):(l(t,"readystatechange",function(){t.readyState=="complete"&&ut()}),t.documentElement.doScroll&&n===top&&(ct=function(){if(!a){try{t.documentElement.doScroll("left")}catch(n){r(ct,1);return}ut()}},ct())),l(n,"load",ut));h=function(n){n=n.substring(1).split("&");for(var i={},t,r=n.length;r--;)t=n[r].split("="),i[t[0]]=u(t[1]);return i}(/xdm_e=/.test(i.search)?i.search:i.hash);ft=function(){var n={},t={a:[1,2,3]},i='{"a":[1,2,3]}';return typeof JSON!="undefined"&&typeof JSON.stringify=="function"&&JSON.stringify(t).replace(/\s/g,"")===i?JSON:(Object.toJSON&&Object.toJSON(t).replace(/\s/g,"")===i&&(n.stringify=Object.toJSON),typeof String.prototype.evalJSON=="function"&&(t=i.evalJSON(),t.a&&t.a.length===3&&t.a[2]===3&&(n.parse=function(n){return n.evalJSON()})),n.stringify&&n.parse)?(ft=function(){return n},n):null};s(e,{version:"2.4.15.118",query:h,stack:{},apply:s,getJSONObject:ft,whenReady:y,noConflict:ii});e.DomHelper={on:l,un:k,requiresJSON:function(i){gt(n,"JSON")||t.write('<script type="text/javascript" src="'+i+'"><\/script>')}},function(){var n={};e.Fn={set:function(t,i){n[t]=i},get:function(t,i){var r=n[t];return i&&delete n[t],r}}}();e.Socket=function(n){var t=bt(wt(n).concat([{incoming:function(t,i){n.onMessage(t,i)},callback:function(t){if(n.onReady)n.onReady(t)}}])),i=o(n.remote);this.origin=o(n.remote);this.destroy=function(){t.destroy()};this.postMessage=function(n){t.outgoing(n,i)};t.init()};e.Rpc=function(n,t){var i,r,u;if(t.local)for(i in t.local)t.local.hasOwnProperty(i)&&(r=t.local[i],typeof r=="function"&&(t.local[i]={method:r}));u=bt(wt(n).concat([new e.stack.RpcBehavior(this,t),{callback:function(t){if(n.onReady)n.onReady(t)}}]));this.origin=o(n.remote);this.destroy=function(){u.destroy()};u.init()};e.stack.SameOriginTransport=function(n){var t,u,f,h;return t={outgoing:function(n,t,i){f(n);i&&i()},destroy:function(){u&&(u.parentNode.removeChild(u),u=null)},onDOMReady:function(){h=o(n.remote);n.isHost?(s(n.props,{src:d(n.remote,{xdm_e:i.protocol+"//"+i.host+i.pathname,xdm_c:n.channel,xdm_p:4}),name:c+n.channel+"_provider"}),u=v(n),e.Fn.set(n.channel,function(n){return f=n,r(function(){t.up.callback(!0)},0),function(n){t.up.incoming(n,h)}})):(f=ti().Fn.get(n.channel,!0)(function(n){t.up.incoming(n,h)}),r(function(){t.up.callback(!0)},0))},init:function(){y(t.onDOMReady,t)}}};e.stack.FlashTransport=function(n){function p(n){r(function(){h.up.incoming(n,a)},0)}function b(i){var r=n.swf+"?host="+n.isHost,h="easyXDM_swf_"+Math.floor(Math.random()*1e4),o;e.Fn.set("flash_loaded"+i.replace(/[\-.]/g,"_"),function(){var n,t;for(e.stack.FlashTransport[i].swf=u=f.firstChild,n=e.stack.FlashTransport[i].queue,t=0;t<n.length;t++)n[t]();n.length=0});n.swfContainer?f=typeof n.swfContainer=="string"?t.getElementById(n.swfContainer):n.swfContainer:(f=t.createElement("div"),s(f.style,ht&&n.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),t.body.appendChild(f));o="callback=flash_loaded"+i.replace(/[\-.]/g,"_")+"&proto="+tt.location.protocol+"&domain="+pt(tt.location.href)+"&port="+ri(tt.location.href)+"&ns="+w;f.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+h+"' data='"+r+"'><param name='allowScriptAccess' value='always'><\/param><param name='wmode' value='transparent'><param name='movie' value='"+r+"'><\/param><param name='flashvars' value='"+o+"'><\/param><embed type='application/x-shockwave-flash' FlashVars='"+o+"' allowScriptAccess='always' wmode='transparent' src='"+r+"' height='1' width='1'><\/embed><\/object>"}var h,l,a,u,f;return h={outgoing:function(t,i,r){u.postMessage(n.channel,t.toString());r&&r()},destroy:function(){try{u.destroyChannel(n.channel)}catch(t){}u=null;l&&(l.parentNode.removeChild(l),l=null)},onDOMReady:function(){a=n.remote;e.Fn.set("flash_"+n.channel+"_init",function(){r(function(){h.up.callback(!0)})});e.Fn.set("flash_"+n.channel+"_onMessage",p);n.swf=nt(n.swf);var t=pt(n.swf),f=function(){e.stack.FlashTransport[t].init=!0;u=e.stack.FlashTransport[t].swf;u.createChannel(n.channel,n.secret,o(n.remote),n.isHost);n.isHost&&(ht&&n.swfNoThrottle&&s(n.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),s(n.props,{src:d(n.remote,{xdm_e:o(i.href),xdm_c:n.channel,xdm_p:6,xdm_s:n.secret}),name:c+n.channel+"_provider"}),l=v(n))};e.stack.FlashTransport[t]&&e.stack.FlashTransport[t].init?f():e.stack.FlashTransport[t]?e.stack.FlashTransport[t].queue.push(f):(e.stack.FlashTransport[t]={queue:[f]},b(t))},init:function(){y(h.onDOMReady,h)}}};e.stack.PostMessageTransport=function(t){function p(n){if(n.origin)return o(n.origin);if(n.uri)return o(n.uri);if(n.domain)return i.protocol+"//"+n.domain;throw"Unable to retrieve the origin of the event";}function a(n){var i=p(n);i==h&&n.data.substring(0,t.channel.length+1)==t.channel+" "&&f.up.incoming(n.data.substring(t.channel.length+1),i)}var f,u,e,h;return f={outgoing:function(n,i,r){e.postMessage(t.channel+" "+n,i||h);r&&r()},destroy:function(){k(n,"message",a);u&&(e=null,u.parentNode.removeChild(u),u=null)},onDOMReady:function(){if(h=o(t.remote),t.isHost){var y=function(i){i.data==t.channel+"-ready"&&(e="postMessage"in u.contentWindow?u.contentWindow:u.contentWindow.document,k(n,"message",y),l(n,"message",a),r(function(){f.up.callback(!0)},0))};l(n,"message",y);s(t.props,{src:d(t.remote,{xdm_e:o(i.href),xdm_c:t.channel,xdm_p:1}),name:c+t.channel+"_provider"});u=v(t)}else l(n,"message",a),e="postMessage"in n.parent?n.parent:n.parent.document,e.postMessage(t.channel+"-ready",h),r(function(){f.up.callback(!0)},0)},init:function(){y(f.onDOMReady,f)}}};e.stack.FrameElementTransport=function(u){var f,e,l,a;return f={outgoing:function(n,t,i){l.call(this,n);i&&i()},destroy:function(){e&&(e.parentNode.removeChild(e),e=null)},onDOMReady:function(){a=o(u.remote);u.isHost?(s(u.props,{src:d(u.remote,{xdm_e:o(i.href),xdm_c:u.channel,xdm_p:5}),name:c+u.channel+"_provider"}),e=v(u),e.fn=function(n){return delete e.fn,l=n,r(function(){f.up.callback(!0)},0),function(n){f.up.incoming(n,a)}}):(t.referrer&&o(t.referrer)!=h.xdm_e&&(n.top.location=h.xdm_e),l=n.frameElement.fn(function(n){f.up.incoming(n,a)}),f.up.callback(!0))},init:function(){y(f.onDOMReady,f)}}};e.stack.NameTransport=function(n){function w(i){var r=n.remoteHelper+(t?"#_3":"#_2")+n.channel;u.contentWindow.sendMessage(i,r)}function b(){t?++l!=2&&t||i.up.callback(!0):(w("ready"),i.up.callback(!0))}function g(n){i.up.incoming(n,a)}function tt(){h&&r(function(){h(!0)},0)}var i,t,u,f,l,h,a,p;return i={outgoing:function(n,t,i){h=i;w(n)},destroy:function(){u.parentNode.removeChild(u);u=null;t&&(f.parentNode.removeChild(f),f=null)},onDOMReady:function(){t=n.isHost;l=0;a=o(n.remote);n.local=nt(n.local);t?(e.Fn.set(n.channel,function(i){t&&i==="ready"&&(e.Fn.set(n.channel,g),b())}),p=d(n.remote,{xdm_e:n.local,xdm_c:n.channel,xdm_p:2}),s(n.props,{src:p+"#"+n.channel,name:c+n.channel+"_provider"}),f=v(n)):(n.remoteHelper=n.remote,e.Fn.set(n.channel,g));u=v({props:{src:n.local+"#_4"+n.channel},onLoad:function i(){var t=u||this;k(t,"load",i);e.Fn.set(n.channel+"_load",tt),function f(){typeof t.contentWindow.sendMessage=="function"?b():r(f,50)}()}})},init:function(){y(i.onDOMReady,i)}}};e.stack.HashTransport=function(t){function d(n){if(i){var r=t.remote+"#"+b+++"_"+n;(l||!h?i.contentWindow:i).location=r}}function g(n){e=n;u.up.incoming(e.substring(e.indexOf("_")+1),k)}function nt(){if(f){var t=f.location.href,n="",i=t.indexOf("#");i!=-1&&(n=t.substring(i));n&&n!=e&&g(n)}}function a(){p=setInterval(nt,w)}var u,tt=this,l,p,w,e,b,f,i,h,k;return u={outgoing:function(n){d(n)},destroy:function(){n.clearInterval(p);(l||!h)&&i.parentNode.removeChild(i);i=null},onDOMReady:function(){if(l=t.isHost,w=t.interval,e="#"+t.channel,b=0,h=t.useParent,k=o(t.remote),l){if(t.props={src:t.remote,name:c+t.channel+"_provider"},h)t.onLoad=function(){f=n;a();u.up.callback(!0)};else{var y=0,p=t.delay/50;(function d(){if(++y>p)throw new Error("Unable to reference listenerwindow");try{f=i.contentWindow.frames[c+t.channel+"_consumer"]}catch(n){}f?(a(),u.up.callback(!0)):r(d,50)})()}i=v(t)}else f=n,a(),h?(i=parent,u.up.callback(!0)):(s(t,{props:{src:t.remote+"#"+t.channel+new Date,name:c+t.channel+"_consumer"},onLoad:function(){u.up.callback(!0)}}),i=v(t))},init:function(){y(u.onDOMReady,u)}}};e.stack.ReliableBehavior=function(){var n,t,i=0,r=0,u="";return n={incoming:function(f,e){var s=f.indexOf("_"),o=f.substring(0,s).split(",");f=f.substring(s+1);o[0]==i&&(u="",t&&t(!0));f.length>0&&(n.down.outgoing(o[1]+","+i+"_"+u,e),r!=o[1]&&(r=o[1],n.up.incoming(f,e)))},outgoing:function(f,e,o){u=f;t=o;n.down.outgoing(r+","+ ++i+"_"+f,e)}}};e.stack.QueueBehavior=function(n){function h(){if(n.remove&&i.length===0){ei(t);return}if(!o&&i.length!==0&&!c){o=!0;var u=i.shift();t.down.outgoing(u.data,u.origin,function(n){o=!1;u.callback&&r(function(){u.callback(n)},0);h()})}}var t,i=[],o=!0,e="",c,l=0,a=!1,s=!1;return t={init:function(){p(n)&&(n={});n.maxLength&&(l=n.maxLength,s=!0);n.lazy?a=!0:t.down.init()},callback:function(n){o=!1;var i=t.up;h();i.callback(n)},incoming:function(i,r){if(s){var f=i.indexOf("_"),o=parseInt(i.substring(0,f),10);e+=i.substring(f+1);o===0&&(n.encode&&(e=u(e)),t.up.incoming(e,r),e="")}else t.up.incoming(i,r)},outgoing:function(r,u,e){n.encode&&(r=f(r));var c=[],o;if(s){while(r.length!==0)o=r.substring(0,l),r=r.substring(o.length),c.push(o);while(o=c.shift())i.push({data:c.length+"_"+o,origin:u,callback:c.length===0?e:null})}else i.push({data:r,origin:u,callback:e});a?t.down.init():h()},destroy:function(){c=!0;t.down.destroy()}}};e.stack.VerifyBehavior=function(n){function u(){i=Math.random().toString(16).substring(2);t.down.outgoing(i)}var t,i,r;return t={incoming:function(f,e){var o=f.indexOf("_");o===-1?f===i?t.up.callback(!0):r||(r=f,n.initiate||u(),t.down.outgoing(f)):f.substring(0,o)===r&&t.up.incoming(f.substring(o+1),e)},outgoing:function(n,r,u){t.down.outgoing(i+"_"+n,r,u)},callback:function(){n.initiate&&u()}}};e.stack.RpcBehavior=function(n,t){function i(n){n.jsonrpc="2.0";r.down.outgoing(f.stringify(n))}function o(n,t){var r=Array.prototype.slice;return function(){var f=arguments.length,s,o={method:t};f>0&&typeof arguments[f-1]=="function"?(f>1&&typeof arguments[f-2]=="function"?(s={success:arguments[f-2],error:arguments[f-1]},o.params=r.call(arguments,0,f-2)):(s={success:arguments[f-1]},o.params=r.call(arguments,0,f-1)),u[""+ ++e]=s,o.id=e):o.params=r.call(arguments,0);n.namedParams&&o.params.length===1&&(o.params=o.params[0]);i(o)}}function s(n,t,r,u){var f,e,o;if(!r){t&&i({id:t,error:{code:-32601,message:"Procedure not found."}});return}t?(f=function(n){f=et;i({id:t,result:n})},e=function(n,r){e=et;var u={id:t,error:{code:-32099,message:n}};r&&(u.error.data=r);i(u)}):f=e=et;ni(u)||(u=[u]);try{o=r.method.apply(r.scope,u.concat([f,e]));p(o)||f(o)}catch(s){e(s.message)}}var r,f=t.serializer||ft(),e=0,u={};return r={incoming:function(n){var r=f.parse(n),e;r.method?t.handle?t.handle(r,i):s(r.method,r.id,t.local[r.method],r.params):(e=u[r.id],r.error?e.error&&e.error(r.error):e.success&&e.success(r.result),delete u[r.id])},init:function(){if(t.remote)for(var i in t.remote)t.remote.hasOwnProperty(i)&&(n[i]=o(t.remote[i],i));r.down.init()},destroy:function(){for(var i in t.remote)t.remote.hasOwnProperty(i)&&n.hasOwnProperty(i)&&delete n[i];r.down.destroy()}}};tt.easyXDM=e}(n,document,location,n.setTimeout,decodeURIComponent,encodeURIComponent);et=function(){function f(t){var i=document.createElement("script"),r=!1;i.src=t;i.async=!0;i.onload=i.onreadystatechange=function(){r||this.readyState&&this.readyState!=="loaded"&&this.readyState!=="complete"||(r=!0,i.onload=i.onreadystatechange=null,i&&i.parentNode&&i.parentNode.removeChild(i))};n||(n=document.getElementsByTagName("head")[0],n||(n=document.body));n.appendChild(i)}function e(n,e,o){i="?";e=e||{};for(t in e)e.hasOwnProperty(t)&&(i+=encodeURIComponent(t)+"="+encodeURIComponent(e[t])+"&");var s="json"+ ++u;return r[s]=function(n){o(n);try{delete r[s]}catch(t){}r[s]=null},f(n+i+"callback="+s),s}var u=0,n,i,t,r=this;return{get:e}}();r=function(n){var t=function(){return t.$prototyping?this:typeof this.initialize=="function"?this.initialize.apply(this,arguments):void 0},i;n.Extends&&(t.parent=n.Extends,n.Extends.$prototyping=!0,t.prototype=new n.Extends,n.Extends.$prototyping=!1);for(i in n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i]);return t};typeof exports!="undefined"&&(exports.Class=r);i=new r({initialize:function(n,t){typeof n=="object"?(this.x=n.x,this.y=n.y):(this.x=n,this.y=t)},cp:function(){return new i(this.x,this.y)},mul:function(n){return this.x*=n,this.y*=n,this},mulNew:function(n){return new i(this.x*n,this.y*n)},div:function(n){return this.x/=n,this.y/=n,this},divNew:function(n){return new i(this.x/n,this.y/n)},add:function(n){return this.x+=n.x,this.y+=n.y,this},addNew:function(n){return new i(this.x+n.x,this.y+n.y)},sub:function(n){return this.x-=n.x,this.y-=n.y,this},subNew:function(n){return new i(this.x-n.x,this.y-n.y)},rotate:function(n){var t=this.x,i=this.y;return this.x=t*Math.cos(n)-Math.sin(n)*i,this.y=t*Math.sin(n)+Math.cos(n)*i,this},rotateNew:function(n){return this.cp().rotate(n)},setAngle:function(n){var t=this.len();return this.x=Math.cos(n)*t,this.y=Math.sin(n)*t,this},setAngleNew:function(n){return this.cp().setAngle(n)},setLength:function(n){var t=this.len();return t?this.mul(n/t):this.x=this.y=n,this},setLengthNew:function(n){return this.cp().setLength(n)},normalize:function(){var n=this.len();return n==0?this:(this.x/=n,this.y/=n,this)},normalizeNew:function(){return this.cp().normalize()},angle:function(){return Math.atan2(this.y,this.x)},collidesWith:function(n){return this.x>n.x&&this.y>n.y&&this.x<n.x+n.width&&this.y<n.y+n.height},len:function(){var n=Math.sqrt(this.x*this.x+this.y*this.y);return n<.005&&n>-.005?0:n},is:function(n){return typeof n=="object"&&this.x==n.x&&this.y==n.y},dot:function(n){return this.x*n.x+this.y*n.y},inTriangle:function(n,t,i){var r=i.subNew(n),u=t.subNew(n),e=p.subNew(n),o=r.dot(r),f=r.dot(u),s=r.dot(e),h=u.dot(u),c=u.dot(e),l=1/(o*h-f*f),a=(h*s-f*c)*l,v=(o*c-f*s)*l;return a>0&&v>0&&a+v<1},distanceFrom:function(n){return Math.sqrt(Math.pow(this.x-n.x,2),Math.pow(this.y-n.y,2))},toString:function(){return"[Vector("+this.x+", "+this.y+") angle: "+this.angle()+", length: "+this.len()+"]"}});typeof exports!="undefined"&&(exports.Vector=i);o=new r({initialize:function(n,t,r,u){this.pos=new i(n,t);this.size={width:r,height:u}},hasPoint:function(n){return n.x>this.getLeft()&&n.x<this.getRight()&&n.y>this.getTop()&&n.y<this.getBottom()},setLeft:function(n){this.pos.x=n+this.size.width/2},setTop:function(n){this.pos.y=n+this.size.height/2},getLeft:function(){return this.pos.x-this.size.width/2},getTop:function(){return this.pos.y-this.size.height/2},getRight:function(){return this.pos.x+this.size.width/2},getBottom:function(){return this.pos.y+this.size.height/2},cp:function(){return new o(this.pos.x,this.pos.y,this.size.width,this.size.height)}});typeof exports!="undefined"&&(exports.Rect=o);var it=new r({initialize:function(){this.listeners=[];this.tweens={};this.running={}},addListener:function(n){this.listeners.push(n)},add:function(n,t){if(t=t||{},t.duration=t.duration||500,t.transition=t.transition||b.Linear,t.repeats=typeof t.repeats=="undefined"?!1:t.repeats,!t.tweens){var i=t.start||0,r=typeof t.end=="undefined"?1:t.end;t.tweens=[[i,r]]}this.tweens[n]=t},update:function(n){var t,i,f,e,o,s,r,h;n=typeof n=="number"?n:u();for(t in this.tweens)if(this.tweens.hasOwnProperty(t)){if(!this.running[t]){this.tweenStart(t,n);continue}if(i=this.tweens[t],f=n-this.running[t].startTime,f>i.duration){this.tweenFinished(i,t);continue}for(e=i.transition(f/i.duration),o=[],s=0;r=i.tweens[s];s++)h=e*(r[1]-r[0])+r[0],o.push(h);this.fire(t,o,e)}},tweenStart:function(n,t){var i,r,u;for(this.running[n]={startTime:t},i=[],r=0;u=this.tweens[n].tweens[r];r++)i.push(u[0]);this.fire(n,i,0)},tweenFinished:function(n,t){for(var i=[],r=0,f;f=n.tweens[r];r++)i.push(f[1]);if(this.fire(t,i,1),!n.repeats){delete this.running[t];delete this.tweens[t];return}this.tweenStart(t,u())},fire:function(n,t,i){for(var u=0,r;r=this.listeners[u];u++)r.set.call(r,n,t,i)}}),b={Linear:function(n){return n},Quadratic:function(n){return n*n},Quintic:function(n){return n*n*n},Shake:function(n){return Math.sin(n)}},t={FPS:60,useAnimationFrame:!1,boids:{flockRadius:400,size:100},path:function(){return document.location.protocol+"//kickassapp.com/"+Array.prototype.slice.call(arguments).join("")},hasCanvas:typeof document.createElement("canvas").getContext!="undefined",bulletColor:"black"};t.easyXDMFlash=t.path("easyxdm.swf");Array.prototype.indexOf||(Array.prototype.indexOf=function(n){var u,r,t,i;if(this===void 0||this===null)throw new TypeError;if((u=Object(this),r=u.length>>>0,r===0)||(t=0,arguments.length>0&&(t=Number(arguments[1]),t!==t?t=0:t!==0&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=r))return-1;for(i=t>=0?t:Math.max(r-Math.abs(t),0);i<r;i++)if(i in u&&u[i]===n)return i;return-1});ft=function(){return n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(t){n.setTimeout(t,1e3/60)}}();var kt=new r({initialize:function(){this.players=[];this.elements=[];this.weaponClass=s[1].cannonClass;this.scrollPos=new i(0,0);this.scrollSize=new i(0,0);this.windowSize={width:0,height:0};this.updateWindowInfo();this.world=new ri(this);this.bulletManager=new hi;this.bulletManager.game=this;this.bulletManager.updateEnemyIndex();this.explosionManager=new ai;this.explosionManager.game=this;this.ui=new ti;this.ui.game=this;this.bombManager=new si;this.bombManager.game=this;this.menuManager=new ni;this.menuManager.game=this;this.menuManager.create();this.statisticsManager=new dt;this.statisticsManager.game=this;t.stats=this.statisticsManager;this.sessionManager=new ci;this.sessionManager.game=this;this.alienManager=new li(this);this.lastUpdate=u();this.keyMap={};this.keydownEvent=f(this,this.keydown);this.keyupEvent=f(this,this.keyup);this.multiplier=10;n.KickAssStyle&&n.KickAssStyle==="white"&&(t.bulletColor="white");a(document,"keydown",this.keydownEvent);a(document,"keyup",this.keyupEvent);a(document,"keypress",this.keydownEvent)},begin:function(){this.addPlayer();this.sessionManager.isPlaying=!0;t.useAnimationFrame||(this.loopTimer=n.setInterval(f(this,this.loop),1e3/t.FPS));t.useAnimationFrame&&ft(f(this,this.loop))},keydown:function(n){var t=ot(n.keyCode);this.keyMap[t]=!0;switch(t){case"left":case"right":case"up":case"down":case"esc":case" ":ut(n)}switch(t){case"esc":this.destroy()}},keyup:function(n){var t=ot(n.keyCode);this.keyMap[t]=!1;switch(t){case"left":case"right":case"up":case"down":case"esc":case" ":n.stopPropogation&&n.stopPropogation();n.preventDefault&&n.preventDefault();n.returnValue=!1}},loop:function(){var r=u(),n=(r-this.lastUpdate)/1e3,i,e;for(this.updateWindowInfo(),i=0;e=this.players[i];i++)e.update(n);this.world.update(n);this.bulletManager.update(n);this.bombManager.update(n);this.explosionManager.update(n);this.alienManager.update(n);this.ui.update(n);this.statisticsManager.update(n);this.sessionManager.update(n);this.lastUpdate=r;t.useAnimationFrame&&ft(f(this,this.loop))},addPlayer:function(){var i=ui.Standard,t;n.KICKASSSHIP&&KICKASSSHIP.points&&(i=KICKASSSHIP);t=new ei;t.game=this;t.setShip(i);this.players.push(t);this.explosionManager.addExplosion(t.pos)},registerElement:function(n){if(!n)throw new Error("Can't register unexisting element.");this.elements.push(n)},unregisterElement:function(n){this.elements.splice(this.elements.indexOf(n),1)},isKickAssElement:function(n){for(var i=0,t;t=this.elements[i];i++)if(n===t||pt(t,n))return!0;return!1},isKeyPressed:function(n){return!!this.keyMap[n]},updateWindowInfo:function(){var t=!!n.ActiveXObject&&document.compatMode=="BackCompat";this.windowSize={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};t&&(this.windowSize.width=document.body.clientWidth,this.windowSize.height=document.body.clientHeight);this.menuManager&&this.menuManager.isVisible()&&(this.windowSize.height-=this.menuManager.getHeight());this.scrollPos.x=n.pageXOffset||document.documentElement.scrollLeft;this.scrollPos.y=n.pageYOffset||document.documentElement.scrollTop;this.scrollSize=bt()},hideAll:function(){for(var n=0,t;t=this.elements[n];n++)t.style.visibility="hidden"},showAll:function(){for(var n=0,t;t=this.elements[n];n++)t.style.visibility="visible"},updateShips:function(n,t){t||this.ui.showMessage("You're now flying<br /><em>"+n.name+"<em>!!");for(var i=0,r;r=this.players[i];i++)r.setShip(n)},changeWeapon:function(n,t){this.weaponClass=n.cannonClass;t||this.ui.showMessage("Changed to "+n.name.toUpperCase()+"!!!!");for(var i=0,r;r=this.players[i];i++)r.setCannons(n.cannonClass)},changeWeaponById:function(n,t){s[n]&&this.changeWeapon(s[n],t)},flyOutPlayers:function(n){for(var i=0,t;t=this.players[i];i++)t.flyTo(n,-t.size.height),t.isBound=!1},flyInPlayers:function(){for(var t=0,n;n=this.players[t];t++)n.flyTo(n.pos.x,100,function(){this.isBound=!0})},newRank:function(n){this.ui.showMessage("OMG. You leveled up to: <strong>"+n+"<\/strong>!<br /><small>Be sure to check what cool new stuff you get in the menu.<\/small>")},fireBomb:function(){this.bombManager.blow()},destroy:function(){rt(document,"keydown",this.keydownEvent);rt(document,"keypress",this.keydownEvent);rt(document,"keyup",this.keyupEvent);for(var i=0,r;r=this.players[i];i++)r.destroy();this.bulletManager.destroy();this.explosionManager.destroy();this.menuManager.destroy();t.useAnimationFrame||clearInterval(this.loopTimer);n.KICKASSGAME=!1}}),dt=new r({initialize:function(){this.data={};this.data.startedPlaying=u();this.data.elementsDestroyed=0;this.data.shotsFired=0;this.data.distanceFlownInPixels=0;this.data.totalPointsThisSession=0;this.data.usedThrusters=0;this.lastUpdate=0},usedThrusters:function(){this.data.usedThrusters=1},increaseDistanceWithPixels:function(n){this.data.distanceFlownInPixels+=n},increasePointsGainedWithPoints:function(n){this.data.totalPointsThisSession+=n},addShotFired:function(){this.data.shotsFired++},addElementsDestroyed:function(){this.data.elementsDestroyed++},update:function(n){this.lastUpdate+=n;this.lastUpdate>.25&&(this.syncWithServer(),this.lastUpdate=0)},syncWithServer:function(){var t=[];for(var n in this.data)this.data.hasOwnProperty(n)&&t.push(n+":"+this.data[n]);this.game.menuManager.sendMessageToMenu("stats:!"+t.join("|"))}}),gt=new r({initialize:function(){this.size={height:300};this.url=t.path("intermediate.html?url="+encodeURIComponent(n.KICKASSURL||document.location.href))},generate:function(n){this.container=document.createElement("div");this.container.className="KICKASSELEMENT";this.container.id="kickass-profile-menu";n.appendChild(this.container);this.isSocketReady=!1;this.socket=new easyXDM.Socket({remote:this.url,remoteHelper:t.path("name.html"),swf:t.path("easyxdm.swf"),container:this.container,lazy:!1,onMessage:f(this,function(n){var t,i;if(n==="ready"){this.onGameReady();return}(t=n.split(":!"),t.length===2)&&(i=t.shift().replace(/^./g,function(n){return n.charAt(0).toUpperCase()}),this["messageType"+i]&&this["messageType"+i](t.join(":!")))}),props:{frameborder:"0",className:"KICKASSELEMENT",style:{width:"100%",height:this.size.height+"px"}}});this.game.registerElement(this.container)},onGameReady:function(){this.isSocketReady=!0;this.game.registerElement(this.container.getElementsByTagName("iframe")[0]);this.socket.postMessage("url:!"+(n.KICKASSURL||document.location.href));this.game.statisticsManager.syncWithServer();this.game.menuManager.onGameReady()},sendMessage:function(n){if(this.isSocketReady&&n!=this.lastMessage){try{this.socket.postMessage(n)}catch(t){}this.lastMessage=n}},messageTypeChangeShip:function(i){i=i.split(",");var r=i[0],e=i[1],u=i[2]==="initial";this.shipId!==r&&(u&&n.KICKASSSHIP||(this.shipId=r,et.get(t.path("designer/ship/"+r+"/construction.jsonp"),{ship_id:r,is_initial:u?"1":"0"},f(this,function(t){this.game.updateShips(t.data,u);try{n.focus()}catch(i){}})),u||this.parent.hideMenu()))},messageTypeChangeWeapon:function(n,t){this.game.changeWeaponById(n,t)},messageTypeSetMultiplier:function(n){(n=parseInt(n,10),!isNaN(n)&&n)&&(this.game.multiplier=n)},messageTypeNewRank:function(n){this.game.newRank(n)},messageTypePlayerMessage:function(n){this.game.ui.showMessage(n)},destroy:function(){this.game.unregisterElement(this.container);this.game.unregisterElement(this.iframe);this.container.parentNode.removeChild(this.container)}}),ni=new r({initialize:function(){this.numPoints=0;this.includeCSS(t.path("css/menustyles.css"))},generateDefaults:function(){for(var n in s)s.hasOwnProperty(n)&&this.addWeapon(s[n],n);this.hideBombMenu()},create:function(){var i,n;for(this.container=document.createElement("div"),this.container.className="KICKASSELEMENT KICKASShidden",this.container.id="kickass-menu",this.container.style.bottom="-250px",this.container.style.display="none",document.body.appendChild(this.container),this.container.innerHTML='<div id="kickass-pointstab" class="KICKASSELEMENT"><iframe src="'+t.path("hello.html")+'" class="KICKASSELEMENT" id="kickass-hello-sunshine" style="display:none; visibility: hidden;"><\/iframe><div id="kickass-bomb-menu" class="KICKASSELEMENT KICKASShidden"><ul id="kickass-bomb-list" class="KICKASSELEMENT"><\/ul><\/div><div id="kickass-weapons-menu" class="KICKASSELEMENT KICKASShidden" style="display:none"><ul id="kickass-weapons-list" class="KICKASSELEMENT"><\/ul><\/div><div id="kickass-pointstab-wrapper" class="KICKASSELEMENT"><div id="kickass-points" class="KICKASSELEMENT">'+this.numPoints+'<\/div><div id="kickass-esctoquit" class="KICKASSELEMENT">Press esc to quit<\/div><iframe class="KICKASSELEMENT kickass-like" src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fkickassapp&amp;send=false&amp;layout=button_count&amp;width=47&amp;show_faces=false&amp;action=like&amp;colorscheme=dark&amp;font=arial&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:80px; height:21px;display:none; visibility: hidden;" allowTransparency="true"><\/iframe><\/div><ul id="kickass-pointstab-menu" class="KICKASSELEMENT" style="display:none; visibility: hidden;"><li class="KICKASSELEMENT"><a class="KICKASSELEMENT" id="kickass-link-highscores" href="#">Submit score<\/a><\/li><li class="KICKASSELEMENT"><a class="KICKASSELEMENT" id="kickass-link-menu" href="#">Menu<\/a><\/li><li class="last-li KICKASSELEMENT"><a class="KICKASSELEMENT" id="kickass-link-ships" href="#">Switch ship<\/a><\/li><\/ul><\/div>',this.pointsTab=document.getElementById("kickass-pointstab"),this.pointsTabWrapper=document.getElementById("kickass-pointstab-wrapper"),this.points=document.getElementById("kickass-points"),this.escToQuit=document.getElementById("kickass-esctoquit"),this.weaponsMenu=document.getElementById("kickass-weapons-menu"),this.weaponsList=document.getElementById("kickass-weapons-list"),this.bombLink=document.getElementById("kickass-bomb-menu"),this.submitScoreLink=document.getElementById("kickass-link-highscores"),this.menuLink=document.getElementById("kickass-link-menu"),this.switchShipLink=document.getElementById("kickass-link-ships"),i=this.container.getElementsByTagName("*"),n=0;n<i.length;n++)this.game.registerElement(i[n]);this.game.registerElement(this.container);this.menu=new gt;this.menu.parent=this;this.menu.game=this.game;this.menu.generate(this.container);a(this.bombLink,"click",f(this,function(n){ut(n);this.game.fireBomb()}))},onGameReady:function(){this.container.style.display="block"},navigateTo:function(n,t){!t},toggleMenu:function(){v(this.container,"KICKASShidden")||this.hideMenu()},toggleWeaponsMenu:function(){v(this.weaponsMenu,"KICKASShidden")?this.showWeaponsMenu():this.hideWeaponsMenu()},hideWeaponsMenu:function(){this.weaponsMenu.style.width="";d(this.weaponsMenu,"KICKASShidden")},showWeaponsMenu:function(){var n=this.weaponsMenu.getElementsByTagName("li");n=n[n.length-1];this.weaponsMenu.style.width=n.offsetLeft+n.offsetWidth-47+"px";st(this.weaponsMenu,"KICKASShidden")},showMenu:function(){this.container.style.bottom="";st(this.container,"KICKASShidden")},hideMenu:function(){this.container.style.bottom="";d(this.container,"KICKASShidden")},showBombMenu:function(){this.bombLink.style.width=""},hideBombMenu:function(){this.bombLink.style.width="0px"},getHeight:function(){return this.container.clientHeight},isVisible:function(){return!v(this.container,"KICKASShidden")},addPoints:function(n,i){var r=n*this.game.multiplier;this.numPoints+=r;this.points.innerHTML=this.numPoints;t.stats.increasePointsGainedWithPoints(r);t.kickass.ui.addPointsBubbleAt(i,r)},includeCSS:function(n){var t=document.createElement("link");t.rel="stylesheet";t.type="text/css";t.href=n;(document.head||document.body).appendChild(t)},sendMessageToMenu:function(n){this.menu.sendMessage(n)},addWeapon:function(n,i){var r=document.createElement("li");r.className="KICKASSELEMENT kickass-weapon-item";r.weapon=n;r.style.backgroundImage="url("+t.path("css/gfx/kickass/weap-"+n.id+".png")+")";r.innerHTML='<span class="KICKASSELEMENT">'+n.name+"<\/span>";this.weaponsList.appendChild(r);a(r,"click",f(this,function(t){ut(t);this.changeWeapon(n);this.sendMessageToMenu("changeWeapon:!"+i)}))},changeWeapon:function(n){this.game.changeWeapon(n)},destroy:function(){for(var t=this.container.getElementsByTagName("*"),n=0;n<t.length;n++)this.game.unregisterElement(t[n]);this.game.unregisterElement(this.container);this.menu.destroy();this.container.parentNode.removeChild(this.container)}}),ti=new r({initialize:function(){this.UNIQID=0;this.pointBubbles={};this.messages={};this.fx=new it;this.fx.addListener(this)},update:function(){this.fx.update()},set:function(n,t,i){var o=n.split("-")[0],r=n.split("-")[1],e,u;this.pointBubbles[r]?(e=this.pointBubbles[r],e.style.top=t[0]+"px",e.style.opacity=t[1],i==1&&e.parentNode&&(e.parentNode.removeChild(e),delete this.pointBubbles[r])):this.messages[r]&&o=="messagedown"?(u=this.messages[r],u.style.top=t[0]+"px",i==1&&setTimeout(f(this,function(){this.fx.add("messageup-"+r,{tweens:[[t[0],-100]],transition:b.Quadratic,duration:300})}),u.staytime||4e3)):this.messages[r]&&o=="messageup"&&(u=this.messages[r],u.style.top=t[0]+"px",i==1&&(u.parentNode.removeChild(u),delete this.messages[r]))},addPointsBubbleAt:function(n,t){var u="bubble"+this.UNIQID++,r=this.game.scrollPos.y+n.y,i=ct("span",{innerHTML:t,className:"KICKASSELEMENT",styles:{position:"absolute",font:"20px Arial",fontWeight:"bold",opacity:"1",color:"black",textShadow:"#fff 1px 1px 3px",top:r,zIndex:"10000000"}});i.style.left=n.x-i.offsetWidth/2+"px";document.body.appendChild(i);this.pointBubbles[u]=i;this.fx.add("bubble-"+u,{tweens:[[r,r-15],[1,0]]})},showMessage:function(n,t){var u;t=t||!1;var f=300,r=this.UNIQID++,i=ct("div",{innerHTML:n,className:"KICKASSELEMENT",id:"kickass-message-"+r,styles:{position:"fixed",top:-100,left:"50%",marginLeft:-f/2,width:f,background:"#222",opacity:.8,padding:"10px",color:"#fff",textAlign:"center",borderRadius:15,font:"20px Arial",fontWeight:"bold",zIndex:"10000000"}});return i.staytime=t,document.body.appendChild(i),u=this.getLowestBubbleY(),i.kickassto=u,this.fx.add("messagedown-"+r,{duration:300,tweens:[[-100,u]],transition:b.Quadratic}),this.messages[r]=i,i},getLowestBubbleY:function(){var n=100;for(var t in this.messages)this.messages.hasOwnProperty(t)&&(n=Math.max(this.messages[t].kickassto+this.messages[t].offsetHeight+10,n));return n}}),ri=new r({initialize:function(){return},render:function(){var n;return},update:function(){return}}),ui={Standard:{points:[[-10,10],[0,-15],[10,10]],thrusters:[{s:{w:20,h:7},p:{x:0,y:14},a:0}],cannons:[{p:{x:0,y:-15},a:0}]}},fi=0,ei=new r({initialize:function(){this.id=fi++;this.tween=!1;this.isBound=!0;this.pos=new i(200,200);this.vel=new i(0,0);this.acc=new i(0,0);this.dir=new i(0,1);this.currentRotation=0;this.isBroken=!1;this.lineOffsets=[];this.deadTime=0;this.friction=.8;this.terminalVelocity=2e3;this.lastPos=new i(0,0)},setShip:function(n){this.ship=n;this.verts=[];for(var r=0,t;t=this.ship.points[r];r++)this.verts.push(new i(t[0],t[1]));this.verts.push(this.verts[0]);this.thrusters=[];this.cannons=[];this.addThrusters(this.ship.thrusters);this.addCannons(this.ship.cannons);this.size=this.getSizeFromVertsAndObjects();this.bounds=this.calculateBounds();this.sheet&&this.sheet.destroy();this.sheet=new l(new o(100,100,this.bounds.x,this.bounds.y));this.forceRedraw=!0},setCannons:function(n){for(var i,r=[],u=0,t;t=this.cannons[u];u++)i=new n(t.pos.x,t.pos.y,t.angle),i.player=this,i.game=this.game,r.push(i),t.destroy();this.cannons=r},addThrusters:function(n){for(var i,r,t=0;i=n[t];t++)r=new oi(i),this.thrusters.push(r)},addCannons:function(n){for(var t,u,i,r=0;t=n[r];r++)u=vt[t.m]||vt.cannon,i=new u.cannonClass(t.p.x,t.p.y,t.a),i.player=this,i.game=this.game,this.cannons.push(i)},update:function(n){var s,e,o,f,r,h;if(this.isBroken){if(!this.lineOffsets.length)for(r=0;r<this.verts.length-1;r++)this.lineOffsets[r]={pos:new i(0,0),dir:new i(1,1).setAngle(Math.PI*2*Math.random())};for(r=0;r<this.lineOffsets.length;r++)this.lineOffsets[r].pos.add(this.lineOffsets[r].dir.cp().setLength(50).mul(n));this.sheet.clear();this.sheet.setAngle(this.dir.angle());this.sheet.setPosition(this.pos);this.sheet.drawBrokenPlayer(this.verts,this.lineOffsets);u()-this.deadTime>1e3&&(this.isBroken=!1,this.lineOffsets=[],this.randomPos());return}for(this.tween||(this.game.isKeyPressed("left")||this.game.isKeyPressed("right")?(this.game.isKeyPressed("left")&&this.rotateLeft(n),this.game.isKeyPressed("right")&&this.rotateRight(n)):this.stopRotate(),this.game.isKeyPressed("up")?this.activateThrusters():this.stopThrusters()),this.game.isKeyPressed(" ")?(this.isShooting=!0,this.isBroken||this.shootPressed()):this.isShooting&&(this.isShooting=!1,this.shootReleased()),this.currentRotation&&this.dir.setAngle(this.dir.angle()+this.currentRotation*n),s=this.acc.mulNew(n).sub(this.vel.mulNew(n*this.friction)),this.vel.add(s),this.vel.len()>this.terminalVelocity&&this.vel.setLength(this.terminalVelocity),e=this.vel.mulNew(n),this.pos.add(e),t.stats.increaseDistanceWithPixels(e.len()),o=!this.acc.is({x:0,y:0}),r=0;f=this.thrusters[r];r++)f.setIsShown(o),f.update(n);if(this.isBound&&this.checkBounds(),!this.lastPos.is(this.pos)||this.currentRotation||this.forceRedraw){if(this.forceRedraw=!1,this.sheet.clear(),this.sheet.setAngle(this.dir.angle()+Math.PI/2),this.sheet.setPosition(this.pos),o)for(r=0;f=this.thrusters[r];r++)f.drawTo(this.sheet);this.sheet.drawPlayer(this.verts);this.lastPos=this.pos.cp()}for(r=0;h=this.cannons[r];r++)h.update(n)},randomPos:function(){var n=this.game.windowSize.width,t=this.game.windowSize.height;this.pos=new i(e(0,n),e(0,t))},checkBounds:function(){if(!this.tween){var i=this.game.windowSize.width,t=this.game.windowSize.height,r=this.pos.x+this.sheet.rect.size.width/2,u=this.pos.y+this.sheet.rect.size.height/2;r>i?(n.scrollTo(this.game.scrollPos.x+50,this.game.scrollPos.y),this.pos.x=0):this.pos.x<0&&(n.scrollTo(this.game.scrollPos.x-50,this.game.scrollPos.y),this.pos.x=i-this.sheet.rect.size.width/2);u>t?(n.scrollTo(this.game.scrollPos.x,this.game.scrollPos.y+t*.75),this.pos.y=0):this.pos.y<0&&(n.scrollTo(this.game.scrollPos.x,this.game.scrollPos.y-t*.75),this.pos.y=t-this.sheet.rect.size.height/2)}},inRect:function(n){for(var r=!1,u=0,t;t=this.verts[u];u++)n.hasPoint(new i(t.x+this.pos.x,t.y+this.pos.y))&&(r=!0);return r},hit:function(){this.isBroken||(this.isBroken=!0,this.deadTime=u())},activateThrusters:function(){this.game.statisticsManager.usedThrusters();this.acc=new i(500,0).setAngle(this.dir.angle())},stopThrusters:function(){this.acc=new i(0,0)},rotateLeft:function(n){this.currentRotation=Math.max(-Math.PI*2,this.currentRotation-Math.PI*10*n)},rotateRight:function(n){this.currentRotation=Math.min(Math.PI*2,this.currentRotation+Math.PI*10*n)},stopRotate:function(){this.currentRotation=0},getSizeFromVertsAndObjects:function(){for(var n,t=0,r=0,u;u=this.verts[r];r++)t=Math.max(t,new i(u).len());for(r=0;n=this.thrusters[r];r++){var f=new i(n.pos.x-n.size.width/2,n.pos.y-n.size.height/2).rotate(n.angle),e=new i(n.pos.x+n.size.width/2,n.pos.y-n.size.height/2).rotate(n.angle),o=new i(n.pos.x-n.size.width/2,n.pos.y+n.size.height/2).rotate(n.angle),s=new i(n.pos.x+n.size.width/2,n.pos.y+n.size.height/2).rotate(n.angle);t=Math.max(t,f.len(),e.len(),o.len(),s.len())}return{width:t*2,height:t*2}},calculateBounds:function(){return{x:Math.max(this.size.width,this.size.height)*1,y:Math.max(this.size.height,this.size.width)*1}},shootPressed:function(){for(var n=0,t;t=this.cannons[n];n++)t.shootPressed()},shootReleased:function(){for(var n=0,t;t=this.cannons[n];n++)t.shootReleased()},flyTo:function(n,t,r){this.tween={start:{pos:this.pos.cp(),dir:this.dir.cp()},to:new i(n,t),callback:r||function(){}};this.tween.time=this.getTimeforTween()},destroy:function(){this.sheet.destroy()}}),oi=new r({initialize:function(n,t){this.pos=new i(n.p);this.size={width:n.s.w,height:n.s.h};this.angle=n.a||0;this.ship=t;this.isShown=!1;this.flameY=1;this.fx=new it;this.fx.addListener(this);this.flames={r:[],y:[]};this.lastFrameUpdate=0;this.generateFlames()},update:function(){this.fx.update();u()-this.lastFrameUpdate>1e3/60&&this.generateFlames()},set:function(n,t){switch(n){case"flames":this.flameY=t}},setIsShown:function(n){!this.isShown&&n&&(this.flameY=0,this.generateFlames(),this.fx.add("flames",{start:this.flameY,end:1,duration:250,transition:b.Quintic}));this.isShown=n},drawTo:function(n){n.drawFlames(this.flames,this.angle)},generateFlames:function(){function f(n,t){return new i(n,t)}var v=this.size.width,y=this.size.width*.05,c=this.size.width*.8,p=c*.1,l=v/2,a=c/2,w=-this.size.height/2,t=this.pos.x,r=this.pos.y-this.size.height/2,n,s,o,h;for(this.flames.r=[f(-l+t,r)],this.flames.y=[f(-a+t,r)],this.flames.self=this,n=0;n<v;n+=y)this.flames.r.push(f(n-l+t,this.flameY*e(this.size.height*.7,this.size.height)+r));for(this.flames.r.push(f(l+t,r)),n=0;n<c;n+=p)this.flames.y.push(f(n-a+t,this.flameY*e(this.size.height*.4,this.size.height*.7)+r));for(this.flames.y.push(f(a+t,r)),this.lastFrameUpdate=u(),s=f(t,r),o=0;h=this.flames.r[o];o++)h.sub(s).rotate(this.angle).add(s);for(o=0;h=this.flames.y[o];o++)h.sub(s).rotate(this.angle).add(s)}}),si=new r({initialize:function(){this.bombShowDelay=30;this.nextBomb=this.bombShowDelay},update:function(n){(this.game.isKeyPressed("F")&&this.isReady()&&this.blow(),this.nextBomb!==-1&&this.game.sessionManager.isPlaying)&&(this.nextBomb-=n,this.nextBomb<0&&(this.game.menuManager.showBombMenu(),this.nextBomb=-1,this.game.ui.showMessage("BOMB IS READY<br />(lower right corner or F)")))},blow:function(){var n=this.game.ui.showMessage("3...",5e3);g(1e3,function(){n.innerHTML="2..."},this);g(2e3,function(){n.innerHTML="1..."},this);g(3e3,function(){n.innerHTML="boom"},this);g(3e3,this.blowStuffUp,this);this.nextBomb=this.bombShowDelay},blowStuffUp:function(){var u,r,n,t,f;for(this.game.bulletManager.updateEnemyIndex(),u=this.game.bulletManager.enemyIndex,r=0;(n=u[r])&&r<10;r++)t=k(n),f=new i(t.left+t.width/2,t.top+t.height/2),this.game.explosionManager.addExplosion(f,n,wi),n.parentNode.removeChild(n);this.game.menuManager.hideBombMenu();this.nextBomb=this.bombShowDelay},isReady:function(){return this.nextBomb===-1}}),lt=["BR","SCRIPT","STYLE","TITLE","META","HEAD","OPTION","OPTGROUP","LINK"],nt=5,hi=new r({initialize:function(){this.lastBlink=0;this.blinkActive=!1;this.enemyIndex=[];this.updateDelay=2.5;this.nextUpdate=this.updateDelay},update:function(n){this.game.isKeyPressed("B")?this.blink():this.blinkActive&&this.endBlink();this.nextUpdate-=n;this.nextUpdate<0&&this.updateEnemyIndex()},blink:function(){if(u()-this.lastBlink>250){for(var t=0,n;n=this.enemyIndex[t];t++)n.style.outline=this.blinkActive?n.KICKASSOLDBORDER:"1px solid red";this.blinkActive=!this.blinkActive;this.lastBlink=u();this.blinkActive||this.updateEnemyIndex()}},endBlink:function(){for(var t=0,n;n=this.enemyIndex[t];t++)n.style.outline=n.KICKASSOLDBORDER;this.lastBlink=0;this.blinkActive=!1},updateEnemyIndex:function(){var i=document.getElementsByTagName("*"),t,n;for(this.enemyIndex=[],t=0;n=i[t];t++)this.isDestroyable(n)&&(this.enemyIndex.push(n),n.KICKASSOLDBORDER=n.style.outline||document.defaultView.getComputedStyle(n,null).outline);this.nextUpdate=this.updateDelay},isDestroyable:function(n,t){if(this.shouldIgnoreElement(n,t))return!1;for(var r=0,i;i=n.childNodes[r];r++)if(i.nodeType===1&&lt.indexOf(i.tagName)===-1&&i.offsetWidth>=nt&&i.offsetHeight>=nt&&document.defaultView.getComputedStyle(i,null).visibility!=="hidden")return!1;return!0},isDestroyableFromCollision:function(n){return this.isDestroyable(n,!0)},shouldIgnoreElement:function(n,t){if(n.nodeType!==1||n==document.documentElement||n==document.body||lt.indexOf(n.tagName)!==-1||n.style.visibility=="hidden"||n.style.display=="none"||typeof n.className=="string"&&n.className.indexOf("KICKASSELEMENT")!=-1||!t&&(n.offsetWidth<nt||n.offsetHeight<nt))return!0;var i;return(n.offsetLeft<0||n.offsetTop<0)&&(i=k(n),i.left+i.width<0||i.top+i.height<0)?!0:(i||(i=k(n)),i.top>=this.game.scrollSize.y)?!0:!1},destroy:function(){var n,t,i;for(n in this.bullets)if(this.bullets.hasOwnProperty(n))for(t=0;i=this.bullets[n][t];t++)i.destroy();this.bullets={}}}),ci=new r({initialize:function(){this.isPlaying=!1},update:function(){this.isPlaying&&this.game.bulletManager.enemyIndex.length==0&&this.weHaveWon()},weHaveWon:function(){this.isPlaying=!1}}),li=r({initialize:function(){this.aliens=[]},update:function(n){if(this.aliens.length)for(var i=0,t;t=this.aliens[i];i++)t.update(n),t.render()}}),tr=function(){var n=new Image;return n.src=t.path("css/gfx/kickass/alien.png"),n},at={w:41,h:30},ir=new r({initialize:function(){this.pos=new i(100,100);this.sprite=new l(new o(this.pos.x,this.pos.y,at.w,at.h))},update:function(){},render:function(){}}),ai=new r({initialize:function(){this.explosions=[]},update:function(n){for(var r=u(),i=0,t;t=this.explosions[i];i++){if(r-t.bornAt>(t.ttl||500)){t.destroy();this.explosions.splice(i,1);continue}t.update(n)}},addExplosion:function(n,t,i){i=i||w;var r=new i(n,t);r.game=this.game;r.checkBounds();this.explosions.push(r)},destroy:function(){for(var n=0,t;t=this.explosions[n];n++)t.destroy();this.explosions=[]}}),c=new r({initialize:function(n,t,r){this.pos=new i(n,t);this.angle=r||0},shootPressed:function(){},shootReleased:function(){},checkCollisions:function(){},getExplosionClass:function(){return w},update:function(n){this.game.hideAll();this.checkCollisions(n);this.game.showAll()},checkCollision:function(n){var i=n.checkCollision();return i?(this.game.explosionManager.addExplosion(n.pos,i,this.getExplosionClass()),this.game.menuManager.addPoints(Math.min(i.getElementsByTagName("*").length+1,100),n.pos),i.isShot||i.parentNode.removeChild(i),t.stats.addElementsDestroyed(),!0):!1},createBullet:function(n){var i=this.getABulletPos(),r=this.getABulletDir(),t=new n(i,r);return t.game=this.game,t.manager=this,t.initCanvas(),t.vel.add(t.vel.cp().setLength(this.player.vel.len())),t},getABulletPos:function(){return this.player.pos.cp().add(this.pos.cp().rotate(this.player.dir.angle()+Math.PI/2))},getABulletDir:function(){return this.player.dir.cp().rotate(this.angle)},destroy:function(){}}),vi=new r({Extends:c,initialize:function(){c.prototype.initialize.apply(this,arguments);this.lasers=[]},getExplosionClass:function(){return bi},update:function(n){this.lasers.length&&(this.removeOld(),c.prototype.update.call(this,n))},checkCollisions:function(n){for(var i=0,t;t=this.lasers[i];i++)t.update(n),this.checkCollision(t)},removeOld:function(){for(var n=0,t;t=this.lasers[n];n++)t.outOfBounds&&(t.destroy(),this.lasers.splice(n,1))},shootPressed:function(){this.lasers.length>5||u()-this.lastFired<500||(this.lastFired=u(),t.stats.addShotFired(),this.lasers.push(this.createBullet(pi)))},destroy:function(){if(this.lasers.length){for(var n=0,t;t=this.lasers[n];n++)t.destroy();this.lasers=[]}}}),yi=new r({Extends:c,initialize:function(){c.prototype.initialize.apply(this,arguments);this.lastFired=0;this.bullets=[]},getExplosionClass:function(){return w},update:function(n){this.bullets.length&&(this.removeOld(),c.prototype.update.call(this,n))},removeOld:function(){for(var i=u(),n=0,t;t=this.bullets[n];n++)i-t.bornAt>2e3&&(t.destroy(),this.bullets.splice(n,1))},checkCollisions:function(n){for(var i=0,t;t=this.bullets[i];i++)t.update(n),this.checkCollision(t)&&(t.destroy(),this.bullets.splice(i,1))},shootPressed:function(){u()-this.lastFired<200||(this.lastFired=u(),this.addBullet(),t.stats.addShotFired())},addBullet:function(){this.bullets.length>7&&(this.bullets[0].destroy(),this.bullets.shift());var n=this.createBullet(tt);this.bullets.push(n)},destroy:function(){for(var n=0,t;t=this.bullets[n];n++)t.destroy();this.bullets=[]}}),tt=new r({initialize:function(n,t){this.pos=n.cp();this.dir=t;this.vel=new i(500,500);this.bornAt=u()},initCanvas:function(){this.sheet=new l(new o(this.pos.x,this.pos.y,5,5));this.sheet.drawBullet()},draw:function(){this.sheet.setPosition(this.pos)},update:function(n){this.pos.add(this.vel.setAngle(this.dir.angle()).mulNew(n));this.checkBounds();this.draw()},checkCollision:function(){var n=document.elementFromPoint(this.pos.x,this.pos.y);return n&&n.nodeType==3&&(n=n.parentNode),n&&this.game.bulletManager.isDestroyableFromCollision(n)?n:!1},checkBounds:function(){var n=this.game.windowSize.width,t=this.game.windowSize.height,i=this.pos.x+this.sheet.rect.size.width/2,r=this.pos.y+this.sheet.rect.size.height/2;i>n?this.pos.x=0:this.pos.x<0&&(this.pos.x=n-this.sheet.rect.size.width/2);r>t?this.pos.y=0:this.pos.y<0&&(this.pos.y=t-this.sheet.rect.size.height/2)},destroy:function(){this.sheet.destroy()}}),pi=new r({Extends:tt,initialize:function(){tt.prototype.initialize.apply(this,arguments);this.vel=new i(750,750);this.lastDrawPos=this.pos.cp()},initCanvas:function(){var n=Math.max(t.laserImage.width,t.laserImage.height);this.sheet=new l(new o(0,0,n,n))},update:function(){tt.prototype.update.apply(this,arguments)},draw:function(){this.sheet.drawLaser(this.pos,this.dir);this.lastDrawPos=this.pos.cp()},checkBounds:function(){var n=this.game.windowSize.width,t=this.game.windowSize.height,i=this.pos.x+this.sheet.rect.size.width/2,r=this.pos.y+this.sheet.rect.size.height/2;(i>n||this.pos.x<0)&&(this.outOfBounds=!0);(r>t||this.pos.y<0)&&(this.outOfBounds=!0)},destroy:function(){this.sheet.destroy()}});t.laserImage=document.createElement("img");t.laserImage.src=t.path("css/gfx/kickass/laser.png");var y=new r({initialize:function(n){this.bornAt=u();this.pos=n.cp()},update:function(){},checkBounds:function(){},destroy:function(){}}),w=new r({Extends:y,initialize:function(n){y.prototype.initialize.apply(this,arguments);this.particleVel=new i(150,0);this.particles=[];this.generateParticles();this.sheet=new l(new o(n.x,n.y,250,250))},update:function(n){for(var i=0,t;t=this.particles[i];i++)t.pos.add(t.vel.mulNew(n).mul(e(.5,1)).setAngle(t.dir.angle()));this.sheet.clear();this.sheet.drawExplosion(this.particles)},generateParticles:function(){for(var n=0,r=t.hasCanvas?40:10;n<r;n++)this.particles.push({dir:new i(e(0,20)-10,e(0,20)-10).normalize(),vel:this.particleVel.cp(),pos:new i(0,0),color:["yellow","red"][e(0,1)]})},checkBounds:function(){var n=this.sheet.rect.getRight(),t=this.sheet.rect.getBottom(),i=this.game.windowSize.width,r=this.game.windowSize.height;n>i&&(this.pos.x-=n-i);t>r&&(this.pos.y-=t-r);this.sheet.setPosition(this.pos)},destroy:function(){this.sheet.destroy()}}),wi=new r({Extends:w,initialize:function(n){y.prototype.initialize.apply(this,arguments);this.particleVel=new i(200,0);this.particles=[];this.generateParticles();this.sheet=new l(new o(n.x,n.y,500,500));this.ttl=2e3;this.generationDelay=.6;this.generationTimes=2;this.nextGenerate=this.generationDelay},update:function(n){this.nextGenerate-=n;this.nextGenerate<=0&&this.generationTimes>0&&(this.nextGenerate=this.generationDelay,this.generateParticles(),this.generationTimes--);w.prototype.update.call(this,n)}}),bi=new r({Extends:y,initialize:function(n,t){t&&(y.prototype.initialize.apply(this,arguments),this.element=t,this.fx=new it,this.fx.addListener(this),this.start())},update:function(){this.element&&this.fx.update()},set:function(n){n=="opacity"},start:function(){var i=this.createClones(),r=i[0],u=i[1],n="rotate(-"+e(30,50)+"deg) translate(-100px, 40px)",t="rotate("+e(30,50)+"deg) translate(100px, 40px)";h(r,{WebkitTransform:n,MozTransform:n,OTransform:n,MsTransform:n});h(u,{WebkitTransform:t,MozTransform:t,OTransform:t,MsTransform:t});this.left=r;this.right=u;this.fx.add("opacity",{start:1,end:.5,duration:500})},createClones:function(){var n=k(this.element),f=this.createContainer(n),t=this.createContainer(n),i=ht(this.element),r=ht(this.element),u;return d(i,"KICKASSELEMENT"),d(r,"KICKASSELEMENT"),u={margin:0,overflow:"hidden"},h(i,u),h(r,u),f.appendChild(i),t.appendChild(r),t.style.left=n.left+n.width/2+"px",t.scrollLeft+=n.width/2,this.element.style.opacity=0,this.element.style.visibility="hidden",this.element.style.display="none",yt([f,t],function(n){n.style.WebkitTransition="-webkit-transform 500ms ease-in";n.style.OTransition="-o-transform 500ms ease-in";n.style.MozTransition="-moz-transform 500ms ease-in";n.style.MsTransition="-ms-transform 500ms ease-in"})},createContainer:function(n){var t=document.createElement("div");return h(t,{position:"absolute",left:n.left,top:n.top,width:n.width*.5,height:n.height,overflow:"hidden"}),document.body.appendChild(t),t},destroy:function(){try{this.left.parentNode.removeChild(this.left);this.right.parentNode.removeChild(this.right);this.element.parentNode.removeChild(this.element)}catch(n){}}}),s={1:{name:"Cannon",id:"cannon",cannonClass:yi},2:{name:"Laser",id:"laser",cannonClass:vi}},vt={cannon:s[1],laser:s[2]},ki=new r({initialize:function(n){this.rect=n;this.fillColor="black";this.strokeColor="black";this.lineWidth=1;this.polyString="";this.raphael=Raphael(this.rect.pos.x-this.rect.size.width/2,this.rect.pos.y-this.rect.size.height/2,this.rect.size.width,this.rect.size.height);this.raphael.canvas.style.zIndex="10000";this.raphael.canvas.className="KICKASSELEMENT";t.kickass.registerElement(this.raphael.canvas)},tracePoly:function(n){if(n[0]){this.polyString="M"+n[0].x+" "+n[0].y;for(var t=0;t<n.length;t++)this.polyString+="L"+n[t].x+" "+n[t].y}},setAngle:function(n){this.angle=n},updateCanvas:function(){this.raphael.canvas.width=this.rect.size.width;this.raphael.canvas.height=this.rect.size.height;this.raphael.canvas.style.left=t.kickass.scrollPos.x+(this.rect.pos.x-this.rect.size.width/2)+"px";this.raphael.canvas.style.top=t.kickass.scrollPos.y+(this.rect.pos.y-this.rect.size.height/2)+"px"},drawLine:function(n,t,i,r){this.tracePoly([[n,t],[i,r]]);this.strokePath()},drawCircle:function(n,t){t=t||{x:0,y:0};this.currentElement=this.raphael.circle(t.x,t.y,n);this.currentElement.attr("fill",this.fillColor)},setFillColor:function(n){this.fillColor=n},setStrokeColor:function(n){this.strokeColor=n},setLineWidth:function(n){this.lineWidth=n},fillPath:function(){this.currentElement=this.raphael.path(this.polyString);this.currentElement.translate(this.rect.size.width/2,this.rect.size.height/2);this.currentElement.attr("fill",this.fillColor);this.currentElement.attr("stroke",this.fillColor);this.currentElement.rotate(Raphael.deg(this.angle),this.rect.size.width/2,this.rect.size.height/2)},strokePath:function(){this.currentElement=this.raphael.path(this.polyString);this.currentElement.attr("stroke",this.strokeColor);this.currentElement.attr("stroke-width",this.lineWidth);this.currentElement.translate(this.rect.size.width/2,this.rect.size.height/2);this.currentElement.rotate(Raphael.deg(this.angle),this.rect.size.width/2,this.rect.size.height/2)},clear:function(){this.raphael.clear()},destroy:function(){t.kickass.unregisterElement(this.raphael.canvas);this.raphael.remove()}}),di=new r({initialize:function(n){this.canvas=document.createElement("canvas");this.canvas.className="KICKASSELEMENT";with(this.canvas.style)position="absolute",zIndex="1000000";t.kickass.registerElement(this.canvas);this.canvas.getContext&&(this.ctx=this.canvas.getContext("2d"));this.rect=n;this.angle=0;this.updateCanvas();document.body.appendChild(this.canvas)},tracePoly:function(n){if(n[0]){this.ctx.save();this.ctx.translate(this.rect.size.width/2,this.rect.size.height/2);this.ctx.rotate(this.angle);this.ctx.beginPath();this.ctx.moveTo(n[0].x,n[0].y);for(var t=0;t<n.length;t++)this.ctx.lineTo(n[t].x,n[t].y);this.ctx.restore()}},setAngle:function(n){this.angle=n},updateCanvas:function(){this.canvas.width!=this.rect.size.width&&(this.canvas.width=this.rect.size.width);this.canvas.height!=this.rect.size.height&&(this.canvas.height=this.rect.size.height);this.canvas.style.left=t.kickass.scrollPos.x+(this.rect.pos.x-this.rect.size.width/2)+"px";this.canvas.style.top=t.kickass.scrollPos.y+(this.rect.pos.y-this.rect.size.height/2)+"px"},drawLine:function(n,t,i,r){this.ctx.save();this.ctx.translate(this.rect.size.width/2,this.rect.size.height/2);this.ctx.beginPath();this.ctx.moveTo(n,t);this.ctx.lineTo(i,r);this.ctx.closePath();this.ctx.stroke();this.ctx.restore()},drawCircle:function(n,t){t=t||{x:0,y:0};this.ctx.save();this.ctx.translate(this.rect.size.width/2,this.rect.size.height/2);t&&this.ctx.translate(t.x,t.y);this.ctx.beginPath();this.ctx.arc(0,0,n,0,Math.PI*2,!0);this.ctx.fill();this.ctx.closePath();this.ctx.restore()},drawRect:function(n,t,i,r){this.ctx.save();this.ctx.translate(this.rect.size.width/2,this.rect.size.height/2);this.ctx.translate(n,t);this.ctx.fillRect(n,t,i,r);this.ctx.restore();this.ctx.fill()},drawImageFull:function(n){this.ctx.drawImage(n,0,0,this.rect.size.width,this.rect.size.height)},drawImage:function(n,t,i){this.ctx.save();this.ctx.translate(this.rect.size.width/2+t,this.rect.size.height/2+i);this.ctx.rotate(this.angle);this.ctx.drawImage(n,0,-11);this.ctx.restore()},setFillColor:function(n){this.ctx.fillStyle=n},setStrokeColor:function(n){this.ctx.strokeStyle=n},setLineWidth:function(n){this.ctx.lineWidth=n},fillPath:function(){this.ctx.fill()},strokePath:function(){this.ctx.stroke()},clear:function(){this.ctx.clearRect(0,0,this.rect.size.width,this.rect.size.height)},destroy:function(){t.kickass.unregisterElement(this.canvas);this.canvas.parentNode.removeChild(this.canvas)}}),l=new r({initialize:function(n){this.rect=n;this.drawer=t.hasCanvas?new di(n):new ki(n)},clear:function(){this.drawer.clear()},setPosition:function(n){this.rect.pos=n.cp();this.drawer.rect=this.rect;this.drawer.updateCanvas()},setAngle:function(n){this.drawer.setAngle(n)},drawPlayer:function(n){this.drawer.setFillColor("white");this.drawer.setStrokeColor("black");this.drawer.setLineWidth(1.5);this.drawer.tracePoly(n);this.drawer.fillPath();this.drawer.tracePoly(n);this.drawer.strokePath()},drawBrokenPlayer:function(n,t){var r,u,f,i;for(this.drawer.setStrokeColor("black"),this.drawer.setLineWidth(1.5),r=1,f=n[0];u=n[r];r++,f=u)i=t[r-1],this.drawer.drawLine(f.x+i.pos.x,f.x+i.pos.y,u.x+i.pos.x,u.y+i.pos.y)},drawFlames:function(n){this.drawer.setLineWidth(1.5);this.drawer.setFillColor("red");this.drawer.tracePoly(n.r);this.drawer.fillPath();this.drawer.setFillColor("yellow");this.drawer.tracePoly(n.y);this.drawer.fillPath()},drawBullet:function(){this.drawer.setFillColor(t.bulletColor);this.drawer.drawCircle(2.5)},drawExplosion:function(n){for(var i=0,t;t=n[i];i++)this.drawer.setFillColor(t.color),this.drawer.drawRect(t.pos.x,t.pos.y,3,3)},drawFace:function(n){this.drawer.drawImageFull(n)},drawLaser:function(n,i){this.clear();this.setPosition(n);this.drawer.setAngle(i.angle());this.drawer.drawImage(t.laserImage,0,0)},transformToSheetCoordinates:function(n){return n.cp().sub(new i(this.rect.size.width/2,this.rect.size.height/2))},destroy:function(){this.drawer.destroy()}}),gi=function(){n.KICKASSGAME?n.KICKASSGAME.addPlayer():(n.KICKASSGAME=t.kickass=new kt,n.KICKASSGAME.begin())};gi()})(typeof exports!="undefined"?exports:window);
/*
//# sourceMappingURL=kickass.min.js.map
*/